{"version":3,"sources":["utils/ConfigProvider/ElectronConfigProvider.ts","utils/ConfigProvider/WebBrowserConfigProvider.ts","modules/joal-api/stomp/stomp.actions.ts","modules/theme/provider/theme-provider.component.tsx","modules/theme/provider/theme-provider.container.ts","modules/theme/theme-modifier/theme-modifier.component.tsx","modules/theme/theme-modifier/theme-modifier.container.ts","components/ClientInfo/clientInfo.component.tsx","components/ClientInfo/clientInfo.container.ts","components/ClientInfo/index.ts","components/Generics/FetchingIndicator/AbsoluteOverlayFetchingIndicator.tsx","components/UiConfigChanger/uiConfigChanger.component.tsx","components/UiConfigChanger/uiConfigChanger.container.ts","components/UiConfigChanger/index.ts","components/TorrentsTable/Announcer/Peers/Peers.tsx","components/TorrentsTable/Announcer/Peers/index.ts","components/TorrentsTable/Announcer/UploadSpeed/uploadSpeed.component.tsx","components/TorrentsTable/Announcer/UploadSpeed/index.ts","components/TorrentsTable/Announcer/UploadSpeed/uploadSpeed.container.ts","components/TorrentsTable/Announcer/ProgressBar/AnnouncingProgressBar.component.tsx","components/TorrentsTable/Announcer/ProgressBar/TimeUntilAnnounceProgressBar.component.tsx","components/TorrentsTable/Announcer/Announcer.tsx","components/TorrentsTable/Announcer/index.ts","components/TorrentsTable/torrentsTable.component.tsx","components/TorrentsTable/torrentsTable.container.ts","components/TorrentsTable/index.ts","pages/dashboard/dashboard.component.tsx","pages/dashboard/dashboard.container.ts","pages/dashboard/index.ts","pages/settings/settings.component.tsx","pages/settings/settings.container.ts","pages/settings/index.ts","pages/event-history/event-history.component.tsx","pages/event-history/event-history.container.ts","pages/event-history/index.ts","components/NavigationBar/navigationBar.component.tsx","components/NavigationBar/index.ts","components/NavigationBar/navigationBar.container.ts","components/TorrentDropZone.tsx","components/AppBar/appbar.component.tsx","components/AppBar/index.ts","modules/alerts/alert-template/icons/BaseIcon.tsx","modules/alerts/alert-template/icons/InfoIcon.tsx","modules/alerts/alert-template/icons/SuccessIcon.tsx","modules/alerts/alert-template/icons/ErrorIcon.tsx","modules/alerts/alert-template/icons/CloseIcon.tsx","modules/alerts/alert-template/alert-template.component.tsx","modules/alerts/alert-template/index.ts","modules/alerts/alerts-displayer.component.tsx","modules/alerts/index.ts","modules/alerts/alerts-provider.component.tsx","App.tsx","Root.tsx","components/TorrentsTable/torrentsTable.reducer.ts","pages/settings/settings.reducer.ts","modules/theme/theme-modifier/theme-modifier.reducer.ts","modules/joal-api/torrentFiles/torrentFiles.reducer.ts","modules/joal-api/client/client.reducer.ts","modules/joal-api/settings/settings.reducer.ts","modules/joal-api/speed/speed.reducer.ts","modules/joal-api/announcers/announcers.reducer.ts","modules/joal-api/stomp/stomp.reducer.ts","modules/joal-api/joal-api.reducer.ts","modules/alerts/alerts.reducer.ts","reducers/index.ts","store/configureAppStore.ts","serviceWorker.ts","index.tsx","modules/joal-api/settings/settings.actions.ts","modules/joal-api/index.ts","modules/joal-api/JoalStompClient.ts","modules/joal-api/torrentFiles/torrentFile.actions.ts","modules/joal-api/client/client.actions.ts","modules/joal-api/announcers/announcers.actions.ts","utils/ConfigProvider/index.ts","components/TorrentsTable/torrentsTable.actions.ts","pages/settings/settings.actions.ts","modules/joal-api/speed/speed.actions.ts","modules/theme/theme-modifier/theme-modifier.actions.ts","modules/alerts/alerts.actions.ts"],"names":["__webpack_require__","r","__webpack_exports__","d","getConfig","saveConfig","localStorageConf","localStorage","getItem","JSON","parse","console","log","host","window","location","hostname","port","pathPrefix","pathname","substring","lastIndexOf","secretToken","newConfig","setItem","stringify","cachedConf","IS_CONNECTING","HAS_CONNECTED","HAS_FAILED_TO_CONNECT","HAS_DROP_CONNECTION","INIT_OVER","RECEIVED_ERROR_MESSAGE","RESET_STOMP_STATE","isConnecting","hasConnected","hasFailedToConnect","hasDropConnection","initOver","hasReceivedError","resetStompState","type","message","materialUiThemeCreator","themeType","createMuiTheme","palette","primary","light","main","dark","secondary","ThemeProvider","props","children","react_default","a","createElement","MuiThemeProvider","theme","CssBaseline","connect","state","ThemeProviderComponent","ThemeModifier","onClickChangeThemeType","IconButton","aria-label","onClick","Brightness2Outlined_default","htmlColor","Brightness2_default","dispatch","changeThemeType","useStyles","makeStyles","createStyles","container","padding","leftIcon","marginRight","spacing","playPauseButton","backgroundColor","grey","boxShadow","shadows","&:focusVisible","&:active","&:disabled","color","action","disabled","disabledBackground","&:hover","@media (hover: none)","redTextButton","red","greenTextButton","green","ClientInfo","classes","classNameProps","className","client","overallUploadSpeed","isStarted","onClickStart","onClickStop","numberOfQueuedTorrents","stateText","Paper","elevation","classnames","Typography","align","variant","gutterBottom","Button","fullWidth","contained","PauseCircleFilled_default","PlayCircleFilled_default","Divider","style","marginTop","marginBottom","concat","filesize","base","defaultProps","calculateGobalSpeed","speeds","totalSpeed","_i","_Object$values","Object","values","length","bytesPerSecond","ClientInfoContainer","api","name","speed","torrentFiles","announcers","sendStartSession","sendStopSession","ClientInfoComponent","position","top","bottom","left","right","zIndex","display","alignItems","justifyContent","AbsoluteOverlayFetchingIndicator","containerStyle","active","rest","objectWithoutProperties","CircularProgress","assign","width","height","UiConfigChanger","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","config","isModalVisible","hostErr","portErr","pathPrefixErr","secretTokenErr","setState","intPort","parseInt","isNaN","objectSpread","saveNewConf","_this$state","hasError","_this$state2","_this2","_this$props","isConnected","_this$state3","redButton","changeConfigButton","Dialog","open","onClose","discardChangesAndClose","aria-labelledby","scroll","DialogTitle","id","DialogContent","FormControl","formControl","error","aria-describedby","InputLabel","htmlFor","Input","placeholder","value","onChange","e","handleHostChange","target","FormHelperText","handlePortChange","handlePathPrefixChange","handleSecretTokenChange","DialogActions","Component","withStyles","getContrastText","margin","stomp","getGUIConfig","saveGUIConfig","disconnectAndReconnect","root","leechers","seeders","PeerStats","leechersText","undefined","seedersText","Grid","direction","item","Tooltip","title","placement","data-for","data-tip","aria-hidden","Peers","UploadSpeed","speedInBytesPerSeconds","ownProps","foundSpeed","infoHash","progressBar","AnnouncingProgressBar","LinearProgress","TimeUntilAnnounceProgressBar","_React$useState","React","useState","Math","round","Date","now","lastAnnouncedDate","interval","_React$useState2","slicedToArray","percent","setPercent","useEffect","intervalId","setInterval","p","min","clearInterval","paddingTop","paddingLeft","paddingRight","paddingBottom","lineHeight","wordBreak","uploadSpeedContainer","fontSize","peersStats","deleteButton","fade","hoverOpacity","announceProgressBar","Announcer","componentBreakpoint","announcer","onClickDeleteTorrent","maxAllowedTorrentNameLength","trimedTorrentName","torrentName","xs","torrentSize","standard","DeleteOutlined_default","Announcer_Peers","lastKnownLeechers","lastKnownSeeders","Announcer_UploadSpeed","isFetching","lastAnnouncedAt","AnnouncingProgressBar_component","TimeUntilAnnounceProgressBar_component","lastKnownInterval","withWidth","desc","b","orderBy","getSorting","order","getFiltering","searchFilter","toLowerCase","includes","tableHeadUseStyles","_sortActionsContainer","searchBarPaper","searchBar","marginLeft","flex","searchBarIcon","sortActionsContainer","defineProperty","breakpoints","down","sortButtonGroup","hasSortSelected","toogleButtonWhenNoSortSelection","borderColor","EnhancedTableHead","search","onRequestSearch","onRequestSort","InputBase","Search_default","ToggleButtonGroup","selected","exclusive","v","property","ToggleButton","SortByAlpha_default","CloudDownloadOutlined_default","CloudUploadOutlined_default","EnhancedTableToolbar","_announcer","announersList","up","EnhancedTable","setSearch","_React$useState3","_React$useState4","setOrder","_React$useState5","_React$useState6","setOrderBy","_React$useState7","_React$useState8","page","setPage","_React$useState9","_React$useState10","rowsPerPage","setRowsPerPage","ceil","torrentsTable_component_EnhancedTableToolbar","filter","sort","slice","map","key","TorrentsTable_Announcer","TablePagination","rowsPerPageOptions","component","count","backIconButtonProps","nextIconButtonProps","onChangePage","event","newPage","onChangeRowsPerPage","getFilteredAnnouncers","createSelector","app","torrentsTable","trim","filterText","getSortedAndFilteredAnnouncers","sortProperty","sortDirection","filteredAnnouncers","toConsumableArray","t1","t2","TorrentsTableContainer","onFilterTextChange","text","changeSearchFilterText","onSortChange","changeTorrentSort","deleteTorrent","Announcers","relative","addButton","addButtonInput","Dashboard","shouldDisplayConfigChangerButton","isConnectedToWebSocket","isClientGlobalStatePending","uploadTorrentFiles","md","lg","components_UiConfigChanger","FetchingIndicator_AbsoluteOverlayFetchingIndicator","components_ClientInfo","TorrentsTable","dist_default","place","effect","accept","multiple","files","Array","from","Zoom","in","timeout","enter","transitions","duration","enteringScreen","exit","leavingScreen","transitionDelay","unmountOnExit","Fab","Add_default","withTheme","isElectron","uploadTorrents","discardChangesButton","formInput","minWidth","rightSpaced","MenuProps","PaperProps","maxHeight","ITEM_HEIGHT","Settings","discardLocalConfigChanges","onSettingsChange","onClickSave","availableClients","isLocalConfigChanged","valueHasChanged","newValue","justify","TextField","label","inputProps","minUploadRate","maxUploadRate","Select","input","MenuItem","simultaneousSeed","FormControlLabel","control","Checkbox","checked","keepTorrentWithZeroLeechers","step","max","uploadRatioTarget","parseFloat","helperText","localConfig","settings","localConfigHasChanged","sendConfigToServer","SettingsComponent","textAlign","EventHistory","_ref","events","Warning_default","viewBox","orange","EventHistoryContainer","EventHistoryComponent","NavigationBar","whichPath","currentPath","onClickDashboard","onClickSettings","onClickLogs","BottomNavigation","showLabels","index","BottomNavigationAction","icon","Dashboard_default","Settings_default","Sms_default","NavigationBarContainer","router","push","dropzone","overlay","TorrentDropZone","_useDropzone","useDropzone","onDrop","accepted","rejected","noClick","noKeyboard","getRootProps","getInputProps","isDragActive","rootProps","stopPropagation","flexGrow","grow","menuButton","JoalAppBar","AppBar","Toolbar","theme_modifier_container","BaseIcon","xmlns","fill","strokeWidth","strokeLinecap","strokeLinejoin","stroke","InfoIcon","icons_BaseIcon","cx","cy","x1","y1","x2","y2","SuccessIcon","points","ErrorIcon","CloseIcon","_alert","alert","borderRadius","fontFamily","textTransform","statusIcon","closeButton","border","cursor","closeIconOverride","AlertTemplate","options","close","icons_SuccessIcon","icons_InfoIcon","icons_ErrorIcon","icons_CloseIcon","JoalAlertDisplayer","nextProps","currentNotifs","notifs","currentShouldShowDirtyConfNotif","shouldShowDirtyConfNotif","prevProps","_this$props2","info","forEach","newNotif","findIndex","n","showNotification","notification","_this$props3","onMessageClosed","notifCopy","success","withAlert","_state$alerts","alerts","removeNotification","JoalAlertProvider","react_alert","template","offset","isWidthUp","positions","TOP_RIGHT","transition","FADE","alerts_displayer_component","navigationBarWrapper","onFileDrop","history","components_TorrentDropZone","components_AppBar","esm","react_router","exact","path","Historypage","SettingsPage","DashboardPage","components_NavigationBar","Root","store","es","theme_provider_container","src_App","createReducer","currentPage","torrentsPerPage","_createReducer","TORRENT_SEARCH_FILTER_TEXT_CHANGED","TORRENT_SORT_CHANGED","initialState","settings_reducer_createReducer","LOCAL_CONFIG_HAS_CHANGED","DISCARD_LOCAL_CONFIG","API___CONFIG_IS_IN_DIRTY_STATE","API____CONFIG_HAS_BEEN_LOADED","CHANGE_THEME_TYPE","newTheme","torrentFiles_reducer_createReducer","TORRENT_FILE_ADDED","newState","tf","payload","TORRENT_FILE_DELETED","FAILED_TO_ADD_TORRENT_FILE","RESET_TORRENT_FILES_STATE","client_reducer_createReducer","GLOBAL_SEED_STARTED","GLOBAL_SEED_STOPPED","SEND_START_TO_SERVER","SEND_STOP_TO_SERVER","RESET_CLIENT_STATE","isDirty","errMessage","settings_settings_reducer_createReducer","CONFIG_IS_IN_DIRTY_STATE","INVALID_CONFIG","CONFIG_HAS_BEEN_LOADED","LIST_OF_CLIENT_FILES","clients","RESET_CONFIG","speed_reducer_createReducer","SEEDING_SPEED_HAS_CHANGED","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","currentSpeed","err","return","RESET_SPEED_STATE","announcers_reducer_createReducer","FAILED_TO_ANNOUNCE","find","SUCCESSFULLY_ANNOUNCE","requestEvent","TOO_MANY_ANNOUNCES_FAILED","WILL_ANNOUNCE","RESET_ANNOUNCER_STATE","isFullyInit","stomp_reducer_createReducer","combineReducers","apiTorrentFileReducer","apiClientReducer","apiAnnouncersReducer","apiSettingsReducer","apiSpeedReducer","apiStompReducer","uuidv4","replace","c","crypto","getRandomValues","Uint8Array","toString","isAppInit","alerts_reducer_createReducer","notif","REMOVE_NOTIFICATION","fileName","reducers","apiReducer","uiConfigReducer","torrentsTableReducer","themeReducer","alertReducer","connectRouter","createHashHistory","Boolean","match","rootReducer","createRootReducer","middlewares","routerMiddleware","getDefaultMiddleware","configureStore","reducer","middleware","devTools","preloadedState","configureAppStore","uRLSearchParams","URLSearchParams","credentialsUriEncoded","get","decodeURIComponent","delete","cleanUri","keys","hash","replaceState","document","attemptToGetUiConfigFromQuerySearchParam","connectStomp","rootEl","getElementById","require","default","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister","sendConfig","resetConfig","stompClient","JoalStompClient","reduxStore","onDisconnectCallback","reconnectTimeout","subscriptions","body","arguments","headers","connected","send","guiConf","urlScheme","protocol","url","_dispatchOnConnect","Webstomp","debug","protocols","X-Joal-Auth-Token","X-Joal-Username","_dispatchHasConnected","subscribe","msg","onReceiveMessage","_dispatchIsReady","ack","unsubscribe","subscribesPath","subscribtion","CloseEvent","_dispatchHasDropConnection","_dispatchHasFailedToConnect","_reconnectAfterTimeout","sub","setTimeout","disconnect","clearTimeout","joal_api_connectStomp","joal_api_sendStartSession","joal_api_sendStopSession","joal_api_sendConfigToServer","appStore","resetClientState","resetAnnouncerState","resetTorrentFilesState","resetSpeedState","sendStartToServer","sendStopToServer","reader","FileReader","processOne","file","singleFile","pop","onload","result","b64Encoded","b64String","onabort","onerror","readAsDataURL","torrentInfoHash","selectedConfProvider","is_electron__WEBPACK_IMPORTED_MODULE_0__","is_electron__WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"static/js/main.c534429f.chunk.js","sourcesContent":["/* eslint-disable import/no-unresolved, global-require, import/no-absolute-path */\r\n\r\nimport { GuiConfig } from './types';\r\n\r\nexport const getConfig = (): GuiConfig => {\r\n  const localStorageConf = localStorage.getItem('guiConfig');\r\n  if (!localStorageConf) {\r\n    console.log('Returning a mocked config to prevent exception from NullPointer');\r\n    return {\r\n      host: window.location.hostname, // this default settings is to prevent Firefox to crash with \"SecurityError: The operation is insecure.\" due to cross origin websocket\r\n      port: window.location.port || '80', // this default settings is to prevent Firefox to crash with \"SecurityError: The operation is insecure.\" due to cross origin websocket\r\n      pathPrefix: window.location.pathname.substring(1, window.location.pathname.lastIndexOf('/ui')) || '',\r\n      secretToken: ''\r\n    };\r\n  }\r\n\r\n  // We do not cache the config here. When running in electron the config is injected in a way that is subject to race condition.\r\n  // If we read the value too early, we're going to cache the old config.\r\n  return JSON.parse(localStorageConf);\r\n};\r\n\r\nexport const saveConfig = (newConfig: GuiConfig) => {\r\n  localStorage.setItem('guiConfig', JSON.stringify(newConfig));\r\n};\r\n","import { GuiConfig } from './types';\r\n\r\nlet cachedConf: GuiConfig;\r\n\r\nexport const getConfig = (): GuiConfig => {\r\n  if (!cachedConf) {\r\n    const localStorageConf = localStorage.getItem('guiConfig');\r\n    if (!localStorageConf) {\r\n      cachedConf = {\r\n        host: window.location.hostname, // this default settings is to prevent Firefox to crash with \"SecurityError: The operation is insecure.\" due to cross origin websocket\r\n        port: window.location.port || '80', // this default settings is to prevent Firefox to crash with \"SecurityError: The operation is insecure.\" due to cross origin websocket\r\n        pathPrefix: '',\r\n        secretToken: ''\r\n      };\r\n    } else {\r\n      cachedConf = JSON.parse(localStorageConf);\r\n    }\r\n  }\r\n  return cachedConf;\r\n};\r\n\r\nexport const saveConfig = (newConfig: GuiConfig) => {\r\n  localStorage.setItem('guiConfig', JSON.stringify(newConfig));\r\n  cachedConf = newConfig;\r\n};\r\n","export const IS_CONNECTING = '@@api/stompClient/IS_CONNECTING';\r\nexport const HAS_CONNECTED = '@@api/stompClient/HAS_CONNECTED';\r\nexport const HAS_FAILED_TO_CONNECT = '@@api/stompClient/HAS_FAILED_TO_CONNECT';\r\nexport const HAS_DROP_CONNECTION = '@@api/stompClient/HAS_DROP_CONNECTION';\r\nexport const INIT_OVER = '@@api/stompClient/INIT_OVER';\r\nexport const RECEIVED_ERROR_MESSAGE = '@@api/stompClient/RECEIVED_ERROR_MESSAGE';\r\n\r\nexport const RESET_STOMP_STATE = '@@reset/RESET_STOMP_STATE';\r\n\r\n\r\nexport const isConnecting = () => ({\r\n  type: IS_CONNECTING\r\n});\r\n\r\nexport const hasConnected = () => ({\r\n  type: HAS_CONNECTED\r\n});\r\n\r\nexport const hasFailedToConnect = () => ({\r\n  type: HAS_FAILED_TO_CONNECT\r\n});\r\n\r\nexport const hasDropConnection = () => ({\r\n  type: HAS_DROP_CONNECTION\r\n});\r\n\r\nexport const initOver = () => ({\r\n  type: INIT_OVER\r\n});\r\n\r\nexport const hasReceivedError = (message: string) => ({\r\n  type: RECEIVED_ERROR_MESSAGE,\r\n  message\r\n});\r\n\r\n\r\nexport const resetStompState = () => (\r\n  { type: RESET_STOMP_STATE }\r\n);\r\n","import React, { ReactNode } from 'react';\r\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\r\nimport primary from '@material-ui/core/colors/blue';\r\nimport secondary from '@material-ui/core/colors/lightGreen';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\n\r\n\r\nconst materialUiThemeCreator = (themeType: 'light' | 'dark') => createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      light: primary[300],\r\n      main: primary[500],\r\n      dark: primary[700],\r\n    },\r\n    secondary: {\r\n      light: secondary[300],\r\n      main: secondary[500],\r\n      dark: secondary[700],\r\n    },\r\n    type: themeType\r\n  }\r\n});\r\n\r\ntype Props = {\r\n  children: ReactNode,\r\n  themeType: 'light' | 'dark'\r\n};\r\n\r\nconst ThemeProvider = (props: Props) => {\r\n  const { children, themeType } = props;\r\n  return (\r\n    <MuiThemeProvider theme={materialUiThemeCreator(themeType)}>\r\n      {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\r\n      <CssBaseline />\r\n      {children}\r\n    </MuiThemeProvider>\r\n  );\r\n};\r\n\r\nexport default ThemeProvider;\r\n","import { connect } from 'react-redux';\r\nimport ThemeProviderComponent from './theme-provider.component';\r\n\r\nimport { JoalState } from '../../../reducers/types';\r\n\r\nconst mapStateToProps= (state: JoalState) => {\r\n  return {\r\n    themeType: state.theme.palette.type\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(ThemeProviderComponent);\r\n","import React from 'react';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport LightModeOnIcon from '@material-ui/icons/Brightness2Outlined';\r\nimport DarkModeOnIcon from '@material-ui/icons/Brightness2';\r\n\r\nimport { Palette } from '../types';\r\n\r\n\r\ninterface ThemeModifierProps {\r\n  palette: Palette,\r\n  onClickChangeThemeType: () => void\r\n}\r\n\r\nconst ThemeModifier: React.FC<ThemeModifierProps> = (props) => {\r\n  const { palette, onClickChangeThemeType } = props;\r\n\r\n  return (\r\n    <div>\r\n      <IconButton aria-label=\"Switch theme type\" onClick={onClickChangeThemeType}>\r\n        {palette.type === 'light'\r\n          ? <LightModeOnIcon htmlColor=\"#fff\" />\r\n          : <DarkModeOnIcon htmlColor=\"#fff\" />\r\n        }\r\n      </IconButton>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ThemeModifier;\r\n","import { Dispatch } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport ThemeModifier from './theme-modifier.component';\r\nimport { changeThemeType } from './theme-modifier.actions';\r\n\r\nimport { JoalState } from '../../../reducers/types';\r\n\r\nconst mapStateToProps = (state: JoalState) => ({\r\n  palette: state.theme.palette\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\r\n  onClickChangeThemeType: () => dispatch(changeThemeType()),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ThemeModifier);\r\n","import React from 'react';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport PlayIcon from '@material-ui/icons/PlayCircleFilled';\r\nimport PauseIcon from '@material-ui/icons/PauseCircleFilled';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport red from '@material-ui/core/colors/red';\r\nimport green from '@material-ui/core/colors/green';\r\nimport filesize from 'filesize';\r\nimport classnames from 'classnames';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    container: {\r\n      padding: 15\r\n    },\r\n    leftIcon: {\r\n      marginRight: theme.spacing(1),\r\n    },\r\n    playPauseButton: {\r\n      backgroundColor: theme.palette.type === 'dark' ? theme.palette.grey[700] : theme.palette.grey[100],\r\n      boxShadow: theme.shadows[2],\r\n      '&:focusVisible': {\r\n        boxShadow: theme.shadows[6],\r\n      },\r\n      '&:active': {\r\n        boxShadow: theme.shadows[8],\r\n      },\r\n      '&:disabled': {\r\n        color: theme.palette.action.disabled,\r\n        boxShadow: theme.shadows[0],\r\n        backgroundColor: theme.palette.action.disabledBackground,\r\n      },\r\n      '&:hover': {\r\n        backgroundColor: theme.palette.type === 'dark' ? theme.palette.grey[800] : theme.palette.grey[300],\r\n        // Reset on touch devices, it doesn't add specificity\r\n        '@media (hover: none)': {\r\n          backgroundColor: theme.palette.type === 'dark' ? theme.palette.grey[700] : theme.palette.grey[300],\r\n        },\r\n        '&:disabled': {\r\n          backgroundColor: theme.palette.action.disabledBackground,\r\n        },\r\n      },\r\n    },\r\n    redTextButton: {\r\n      color: red[400]\r\n    },\r\n    greenTextButton: {\r\n      color: green[400]\r\n    }\r\n  })\r\n);\r\n\r\ntype ClientInfoProps = {\r\n  className?: string,\r\n  client: string,\r\n  overallUploadSpeed: number,\r\n  isStarted: boolean,\r\n  numberOfQueuedTorrents: number,\r\n  onClickStart: () => void,\r\n  onClickStop: () => void\r\n};\r\n\r\nconst ClientInfo: React.FC<ClientInfoProps> = (props) => {\r\n  const classes = useStyles();\r\n  const {\r\n    className: classNameProps,\r\n    client, overallUploadSpeed, isStarted, onClickStart, onClickStop, numberOfQueuedTorrents\r\n  } = props;\r\n  const stateText = isStarted ? 'Running' : 'Paused';\r\n\r\n  return (\r\n    <Paper elevation={2} className={classnames(classes.container, classNameProps)}>\r\n      <Typography align=\"center\" variant=\"h5\" gutterBottom>\r\n        {stateText}\r\n      </Typography>\r\n      <Button\r\n        color=\"primary\"\r\n        fullWidth\r\n        variant=\"contained\"\r\n        className={isStarted ? classes.redTextButton : classes.greenTextButton}\r\n        classes={{ contained: classes.playPauseButton }}\r\n        onClick={isStarted ? onClickStop : onClickStart}\r\n      >\r\n        {isStarted ? <PauseIcon className={classes.leftIcon} /> : <PlayIcon className={classes.leftIcon} />}\r\n        {isStarted ? 'stop' : 'start'}\r\n      </Button>\r\n\r\n      <Divider style={{ marginTop: 20, marginBottom: 10 }} />\r\n      <Typography align=\"center\" variant=\"body2\" gutterBottom>\r\n        <b>{client}</b>\r\n      </Typography>\r\n      <Typography align=\"left\" variant=\"body2\" gutterBottom>\r\n        {`Overall speed :  ${filesize(overallUploadSpeed, { base: 10 })}/s`}\r\n      </Typography>\r\n      <Typography align=\"left\" variant=\"body2\" gutterBottom>\r\n        {`Torrents in queue :  ${numberOfQueuedTorrents}`}\r\n      </Typography>\r\n    </Paper>\r\n  );\r\n};\r\nClientInfo.defaultProps = {\r\n  className: ''\r\n};\r\n\r\nexport default ClientInfo;\r\n","import { connect } from 'react-redux';\r\nimport ClientInfoComponent from './clientInfo.component';\r\nimport { sendStartSession, sendStopSession } from '../../modules/joal-api';\r\n\r\nimport { JoalState } from '../../reducers/types';\r\nimport { SpeedsArray } from '../../modules/joal-api/types';\r\n\r\nconst calculateGobalSpeed = (speeds: SpeedsArray) => {\r\n  let totalSpeed = 0\r\n  for (let speed of Object.values(speeds)) {\r\n    totalSpeed += speed.bytesPerSecond;\r\n  }\r\n  return totalSpeed;\r\n};\r\n\r\nconst mapStateToProps = (state: JoalState) => {\r\n  return {\r\n    client: state.api.client.name,\r\n    overallUploadSpeed: calculateGobalSpeed(state.api.speed),\r\n    isStarted: state.api.client.isStarted,\r\n    numberOfQueuedTorrents: state.api.torrentFiles.length - state.api.announcers.length,\r\n    onClickStart: () => sendStartSession(),\r\n    onClickStop: () => sendStopSession()\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(ClientInfoComponent);\r\n","import ClientInfoContainer from './clientInfo.container';\r\n\r\nexport default ClientInfoContainer;\r\n","import React from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    container: {\r\n      position: 'absolute',\r\n      top: 0,\r\n      bottom: 0,\r\n      left: 0,\r\n      right: 0,\r\n      backgroundColor: 'rgba(200, 200, 200, 0.63)',\r\n      zIndex: 1200,\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center'\r\n    }\r\n  })\r\n);\r\n\r\ntype AbsoluteOverlayFetchingIndicatorProps = {\r\n  style?: object,\r\n  containerStyle?: object,\r\n  active: boolean\r\n};\r\n\r\nconst AbsoluteOverlayFetchingIndicator: React.FC<AbsoluteOverlayFetchingIndicatorProps> = (props) => {\r\n  const classes = useStyles();\r\n  const {\r\n    style, containerStyle, active, ...rest\r\n  } = props;\r\n  if (!active) {\r\n    return (<div style={{ width: 0, height: 0, position: 'absolute' }} />);\r\n  }\r\n  return (\r\n    <div className={classes.container} style={containerStyle}>\r\n      {active && <CircularProgress {...rest} style={style} />}\r\n    </div>\r\n  );\r\n};\r\nAbsoluteOverlayFetchingIndicator.defaultProps = {\r\n  style: {},\r\n  containerStyle: {}\r\n};\r\n\r\nexport default AbsoluteOverlayFetchingIndicator;\r\n","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { withStyles, createStyles, Theme } from '@material-ui/core/styles';\r\nimport { GuiConfig } from '../../utils/ConfigProvider/types';\r\n\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n  changeConfigButton: {\r\n    backgroundColor: theme.palette.type === 'dark' ? theme.palette.grey[700] : theme.palette.grey[100],\r\n    boxShadow: theme.shadows[2],\r\n    '&:focusVisible': {\r\n      boxShadow: theme.shadows[6],\r\n    },\r\n    '&:active': {\r\n      boxShadow: theme.shadows[8],\r\n    },\r\n    '&:disabled': {\r\n      color: theme.palette.action.disabled,\r\n      boxShadow: theme.shadows[0],\r\n      backgroundColor: theme.palette.action.disabledBackground,\r\n    },\r\n    '&:hover': {\r\n      backgroundColor: theme.palette.type === 'dark' ? theme.palette.grey[800] : theme.palette.grey[300],\r\n      // Reset on touch devices, it doesn't add specificity\r\n      '@media (hover: none)': {\r\n        backgroundColor: theme.palette.type === 'dark' ? theme.palette.grey[700] : theme.palette.grey[300],\r\n      },\r\n      '&:disabled': {\r\n        backgroundColor: theme.palette.action.disabledBackground,\r\n      },\r\n    },\r\n  },\r\n  redButton: {\r\n    color: theme.palette.getContrastText(theme.palette.error.main),\r\n    backgroundColor: theme.palette.error.main,\r\n    '&:hover': {\r\n      backgroundColor: theme.palette.error.dark\r\n    }\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1)\r\n  }\r\n});\r\n\r\ninterface UiConfigChangerProps {\r\n  classes: any,\r\n  isConnected: boolean,\r\n  config: GuiConfig,\r\n  saveNewConf: (config: GuiConfig) => void,\r\n  style?: any\r\n}\r\n\r\ninterface UiConfigChangerState {\r\n  isModalVisible: boolean,\r\n  host: string,\r\n  port: string,\r\n  pathPrefix: string,\r\n  secretToken: string,\r\n  hostErr: string,\r\n  portErr: string,\r\n  pathPrefixErr: string,\r\n  secretTokenErr: string,\r\n}\r\n\r\nclass UiConfigChanger extends Component<UiConfigChangerProps, UiConfigChangerState> {\r\n  static defaultProps = {\r\n    style: {}\r\n  }\r\n\r\n  constructor(props: UiConfigChangerProps) {\r\n    super(props);\r\n    const { config } = props;\r\n\r\n    this.state = {\r\n      isModalVisible: false,\r\n      host: config.host,\r\n      port: config.port,\r\n      pathPrefix: config.pathPrefix,\r\n      secretToken: config.secretToken,\r\n      hostErr: config.host !== '' ? '' : 'Required field',\r\n      portErr: config.port !== '' ? '' : 'Required field',\r\n      pathPrefixErr: config.pathPrefix !== '' ? '' : 'Required field',\r\n      secretTokenErr: config.secretToken !== '' ? '' : 'Required field',\r\n    };\r\n  }\r\n\r\n  handleHostChange(host: string) {\r\n    const hostErr = host === '' ? 'Required field' : '';\r\n    this.setState({ host, hostErr });\r\n  }\r\n\r\n  handlePortChange(port: string) {\r\n    let portErr = '';\r\n    const intPort = parseInt(port) - 0;\r\n    if (isNaN(intPort)) { // eslint-disable-line no-restricted-globals\r\n      portErr = 'You mad bro !';\r\n    } else {\r\n      if (intPort === 0) portErr = 'Port is required';\r\n      if (intPort > 65535) portErr = 'A port that big, seriously ?';\r\n    }\r\n    this.setState({ port, portErr });\r\n  }\r\n\r\n  handlePathPrefixChange(pathPrefix: string) {\r\n    const pathPrefixErr = pathPrefix === '' ? 'Required field' : '';\r\n    this.setState({ pathPrefix, pathPrefixErr });\r\n  }\r\n\r\n  handleSecretTokenChange(secretToken: string) {\r\n    const secretTokenErr = secretToken === '' ? 'Required field' : '';\r\n    this.setState({ secretToken, secretTokenErr });\r\n  }\r\n\r\n  discardChangesAndClose() {\r\n    const { config } = this.props;\r\n    this.setState({ ...(config), isModalVisible: false });\r\n  }\r\n\r\n  saveConfig() {\r\n    const { saveNewConf } = this.props;\r\n    const {\r\n      host, port, pathPrefix, secretToken\r\n    } = this.state;\r\n\r\n    if (this.hasError()) {\r\n      return;\r\n    }\r\n\r\n    saveNewConf({\r\n      host, port, pathPrefix, secretToken\r\n    });\r\n    this.setState({ isModalVisible: false });\r\n  }\r\n\r\n  hasError() {\r\n    const {\r\n      host, port, pathPrefix, secretToken, hostErr, portErr, pathPrefixErr, secretTokenErr\r\n    } = this.state;\r\n\r\n    if (!host || !port || !pathPrefix || !secretToken) {\r\n      return true;\r\n    }\r\n    if (hostErr || portErr || pathPrefixErr || secretTokenErr) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    const { classes, isConnected, style } = this.props;\r\n    const {\r\n      isModalVisible,\r\n      host, port, pathPrefix, secretToken,\r\n      hostErr, portErr, pathPrefixErr, secretTokenErr\r\n    } = this.state;\r\n    return (\r\n      <div style={style}>\r\n        <Button\r\n          variant=\"contained\"\r\n          fullWidth\r\n          onClick={() => this.setState({ isModalVisible: true })}\r\n          className={isConnected ? '' : classes.redButton}\r\n          classes={{ contained: classes.changeConfigButton }}\r\n        >\r\n          Change connection settings\r\n        </Button>\r\n        <Dialog\r\n          open={isModalVisible}\r\n          onClose={() => this.discardChangesAndClose()}\r\n          aria-labelledby=\"form-dialog-connection-settings\"\r\n          scroll=\"paper\"\r\n        >\r\n          <DialogTitle id=\"form-dialog-connection-settings\">Connection settings</DialogTitle>\r\n          <DialogContent>\r\n            <FormControl\r\n              className={classes.formControl}\r\n              error={hostErr.length > 0}\r\n              aria-describedby=\"server-address-text\"\r\n            >\r\n              <InputLabel htmlFor=\"server-address\">Server address</InputLabel>\r\n              <Input id=\"server-address\" placeholder=\"host\" value={host} onChange={(e) => this.handleHostChange(e.target.value)} />\r\n              <FormHelperText id=\"server-address-text\">{hostErr}</FormHelperText>\r\n            </FormControl>\r\n            <FormControl\r\n              className={classes.formControl}\r\n              error={hostErr.length > 0}\r\n              aria-describedby=\"server-port-text\"\r\n            >\r\n              <InputLabel htmlFor=\"server-port\">Server port</InputLabel>\r\n              <Input id=\"server-port\" placeholder=\"port\" type=\"number\" value={port} onChange={(e) => this.handlePortChange(e.target.value)} />\r\n              <FormHelperText id=\"server-port-text\">{portErr}</FormHelperText>\r\n            </FormControl>\r\n            <FormControl\r\n              className={classes.formControl}\r\n              error={hostErr.length > 0}\r\n              aria-describedby=\"path-prefix-text\"\r\n            >\r\n              <InputLabel htmlFor=\"path-prefix\">Path prefix</InputLabel>\r\n              <Input id=\"path-prefix\" placeholder=\"Obfuscation path prefix\" value={pathPrefix} onChange={(e) => this.handlePathPrefixChange(e.target.value)} />\r\n              <FormHelperText id=\"path-prefix-text\">{pathPrefixErr}</FormHelperText>\r\n            </FormControl>\r\n            <FormControl\r\n              className={classes.formControl}\r\n              error={hostErr.length > 0}\r\n              aria-describedby=\"secret-token-text\"\r\n            >\r\n              <InputLabel htmlFor=\"secret-token\">Secret token</InputLabel>\r\n              <Input id=\"secret-token\" placeholder=\"Your secret token\" value={secretToken} onChange={(e) => this.handleSecretTokenChange(e.target.value)} />\r\n              <FormHelperText id=\"secret-token-text\">{secretTokenErr}</FormHelperText>\r\n            </FormControl>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button\r\n              onClick={() => this.discardChangesAndClose()}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              disabled={this.hasError()}\r\n              onClick={() => this.saveConfig()}\r\n            >\r\n              Save\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(UiConfigChanger);\r\n","import { connect } from 'react-redux';\r\nimport UiConfigChanger from './uiConfigChanger.component';\r\nimport { getGUIConfig, saveGUIConfig } from '../../utils/ConfigProvider';\r\nimport { disconnectAndReconnect } from '../../modules/joal-api';\r\nimport { GuiConfig } from '../../utils/ConfigProvider/types';\r\n\r\nimport { JoalState } from '../../reducers/types';\r\n\r\nfunction mapStateToProps(state: JoalState) {\r\n  return {\r\n    isConnected: state.api.stomp.isConnected,\r\n    config: getGUIConfig(),\r\n    saveNewConf: (config: GuiConfig) => {\r\n      saveGUIConfig(config);\r\n      disconnectAndReconnect();\r\n    }\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(UiConfigChanger);\r\n","import UiConfigChanger from './uiConfigChanger.container';\r\n\r\nexport default UiConfigChanger;\r\n","import React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport classnames from 'classnames';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    root: {\r\n    },\r\n    leechers: {\r\n      color: theme.palette.primary.light,\r\n      marginRight: 12\r\n    },\r\n    seeders: {\r\n      color: theme.palette.primary.light\r\n    }\r\n  })\r\n);\r\n\r\ntype PeerStatsProps = {\r\n  className?: string,\r\n  leechers?: number,\r\n  seeders?: number\r\n};\r\n\r\nconst PeerStats: React.FC<PeerStatsProps> = (props) => {\r\n  const classes = useStyles();\r\n  const {\r\n    className: classNameProps, leechers, seeders\r\n  } = props;\r\n  const leechersText = (leechers === null || leechers === undefined) ? '?' : leechers;\r\n  const seedersText = (seeders === null || seeders === undefined) ? '?' : seeders;\r\n\r\n  return (\r\n    <Grid container direction=\"row\" className={classnames(classes.root, classNameProps)}>\r\n      <Grid item>\r\n        <Tooltip title=\"leechers\" aria-label=\"leechers\" placement=\"top\">\r\n          <span className={classes.leechers} data-for=\"leechers\" data-tip=\"Leechers\">\r\n            <i className=\"fa fa-cloud-download\" aria-hidden=\"true\" />\r\n            {` ${leechersText}`}\r\n          </span>\r\n        </Tooltip>\r\n        <Tooltip title=\"seeders\" aria-label=\"seeders\" placement=\"top\">\r\n          <span className={classes.seeders} data-for=\"seeders\" data-tip=\"Seeders\">\r\n            <i className=\"fa fa-cloud-upload\" aria-hidden=\"true\" />\r\n            {` ${seedersText}`}\r\n          </span>\r\n        </Tooltip>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\nPeerStats.defaultProps = {\r\n  className: '',\r\n  leechers: undefined,\r\n  seeders: undefined\r\n};\r\n\r\nexport default PeerStats;\r\n","import Peers from './Peers';\r\n\r\nexport default Peers;\r\n","import React from 'react';\r\nimport filesize from 'filesize';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\ninterface UploadSpeedProps {\r\n  className?: string,\r\n  speedInBytesPerSeconds?: number\r\n};\r\n\r\nconst UploadSpeed: React.FC<UploadSpeedProps> = (props) => {\r\n  const { className: classNameProps, speedInBytesPerSeconds } = props;\r\n\r\n  return (\r\n    <Typography variant=\"caption\" className={classNameProps}>\r\n      {speedInBytesPerSeconds === undefined ? '? B/s' : `${filesize(speedInBytesPerSeconds, { base: 10 })}/s`}\r\n    </Typography>\r\n  );\r\n};\r\nUploadSpeed.defaultProps = {\r\n  className: ''\r\n};\r\n\r\nexport default UploadSpeed;\r\n","import UploadSpeed from './uploadSpeed.container';\r\n\r\nexport default UploadSpeed;\r\n","import { connect } from 'react-redux';\r\nimport UploadSpeed from './uploadSpeed.component';\r\n\r\nimport { JoalState } from '../../../../reducers/types';\r\n\r\nconst mapStateToProps = (state: JoalState, ownProps: { infoHash: string }) => {\r\n  const foundSpeed = state.api.speed[ownProps.infoHash];\r\n\r\n  return {\r\n    speedInBytesPerSeconds: foundSpeed === null || foundSpeed === undefined ? undefined : foundSpeed.bytesPerSecond\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = () => ({});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UploadSpeed);\r\n","import React from 'react';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport classnames from 'classnames';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    progressBar: {\r\n    }\r\n  })\r\n);\r\n\r\ntype AnnouncingProgressBarProps = {\r\n  className?: string\r\n}\r\n\r\nconst AnnouncingProgressBar: React.FC<AnnouncingProgressBarProps> = (props) => {\r\n  const classes = useStyles();\r\n  const { className: classNameProps } = props;\r\n\r\n  return (\r\n    <LinearProgress color=\"primary\" className={classnames(classes.progressBar, classNameProps)} />\r\n  );\r\n}\r\nAnnouncingProgressBar.defaultProps = {\r\n  className: ''\r\n};\r\n\r\nexport default AnnouncingProgressBar;","import React from 'react';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport classnames from 'classnames';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    progressBar: {\r\n    }\r\n  })\r\n);\r\n\r\ntype TimeUntilAnnounceProgressBarProps = {\r\n  className?: string,\r\n  lastAnnouncedDate: string,\r\n  interval: number\r\n}\r\n\r\nconst TimeUntilAnnounceProgressBar: React.FC<TimeUntilAnnounceProgressBarProps> = (props) => {\r\n  const classes = useStyles();\r\n  const { className: classNameProps } = props;\r\n  \r\n  const [ percent, setPercent ] = React.useState(() => \r\n    Math.round((Date.now() - Date.parse(props.lastAnnouncedDate)) / 10 / props.interval)\r\n  );\r\n  \r\n  React.useEffect(() => {\r\n    const intervalId = setInterval(\r\n        () =>setPercent(p => Math.min(p + 1, 100)),\r\n        props.interval * 10\r\n    );\r\n\r\n    return () => clearInterval(intervalId)\r\n  }, [ props.lastAnnouncedDate, props.interval ])\r\n\r\n  return (\r\n    <LinearProgress variant=\"determinate\" value={percent} className={classnames(classes.progressBar, classNameProps)} />\r\n  );\r\n}\r\nTimeUntilAnnounceProgressBar.defaultProps = {\r\n  className: ''\r\n};\r\n\r\nexport default TimeUntilAnnounceProgressBar;\r\n","import React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport DeleteIcon from '@material-ui/icons/DeleteOutlined';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport withWidth, { WithWidthProps } from '@material-ui/core/withWidth';\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport filesize from 'filesize';\r\nimport classnames from 'classnames';\r\nimport PeerStats from './Peers';\r\nimport UploadSpeed from './UploadSpeed';\r\nimport AnnouncingProgressBar from './ProgressBar/AnnouncingProgressBar.component';\r\nimport TimeUntilAnnounceProgressBar from './ProgressBar/TimeUntilAnnounceProgressBar.component';\r\n\r\nimport { Announcer as AnnouncerType } from '../../../modules/joal-api/types';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    root: {\r\n      paddingTop: theme.spacing(1),\r\n      paddingLeft: theme.spacing(2),\r\n      paddingRight: theme.spacing(2),\r\n      paddingBottom: theme.spacing(0.5)\r\n    },\r\n    title: {\r\n      marginTop: 3,\r\n      lineHeight: 1.2,\r\n      wordBreak: 'break-word'\r\n    },\r\n    uploadSpeedContainer: {\r\n      bottom: 5,\r\n      fontSize: 18,\r\n      position: 'absolute',\r\n      right: theme.spacing(2)\r\n    },\r\n    peersStats: {\r\n      fontSize: 14\r\n    },\r\n    deleteButton: {\r\n      color: theme.palette.error.main,\r\n      '&:hover': {\r\n        backgroundColor: fade(theme.palette.error.main, theme.palette.action.hoverOpacity)\r\n      },\r\n      position: 'absolute',\r\n      right: 2,\r\n      top: 2,\r\n      padding: 0,\r\n      height: 35,\r\n      width: 42\r\n    },\r\n    announceProgressBar: {\r\n      position: 'absolute',\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      height: 4\r\n    }\r\n  })\r\n);\r\n\r\ninterface AnnouncerProps extends WithWidthProps {\r\n  className?: string,\r\n  announcer: AnnouncerType,\r\n  onClickDeleteTorrent: (infoHash: string) => void\r\n};\r\n\r\nconst Announcer: React.FC<AnnouncerProps> = (props) => {\r\n  const classes = useStyles();\r\n  const {\r\n    width: componentBreakpoint, className: classNameProps, announcer, onClickDeleteTorrent\r\n  } = props;\r\n\r\n\r\n  const maxAllowedTorrentNameLength = (componentBreakpoint === 'xs' || componentBreakpoint === 'sm') ? 70 : 175;\r\n  let trimedTorrentName = announcer.torrentName;\r\n  if (announcer.torrentName.length > maxAllowedTorrentNameLength) {\r\n    trimedTorrentName = `${announcer.torrentName.substring(0, maxAllowedTorrentNameLength)}...`;\r\n  }\r\n\r\n  return (\r\n    <Paper elevation={2} style={{ position: 'relative' }} className={classnames(classes.root, classNameProps)}>\r\n      <Grid container direction=\"row\">\r\n        <Grid item xs>\r\n          <Typography\r\n            align=\"left\"\r\n            className={classes.title}\r\n            variant=\"body2\"\r\n            gutterBottom\r\n          >\r\n            {`${trimedTorrentName} (${filesize(announcer.torrentSize, { standard: 'iec' })})`}\r\n          </Typography>\r\n        </Grid>\r\n        <Grid item style={{ width: 42 }}>\r\n          <Tooltip title=\"Delete this torrent\" placement=\"left\">\r\n            <IconButton\r\n              className={classes.deleteButton}\r\n              aria-label=\"Delete\"\r\n              onClick={() => onClickDeleteTorrent(announcer.infoHash)}\r\n            >\r\n              <DeleteIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid container direction=\"row\">\r\n        <Grid item xs>\r\n          <PeerStats\r\n            className={classes.peersStats}\r\n            leechers={announcer.lastKnownLeechers}\r\n            seeders={announcer.lastKnownSeeders}\r\n          />\r\n        </Grid>\r\n        <Grid item xs>\r\n          <div className={classes.uploadSpeedContainer}>\r\n            <UploadSpeed\r\n              infoHash={announcer.infoHash}\r\n            />\r\n          </div>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      {announcer.isFetching || announcer.lastAnnouncedAt === undefined ? (\r\n        <AnnouncingProgressBar className={classes.announceProgressBar} />\r\n      ) : (\r\n        <TimeUntilAnnounceProgressBar className={classes.announceProgressBar} lastAnnouncedDate={announcer.lastAnnouncedAt} interval={announcer.lastKnownInterval} />\r\n      )}\r\n    </Paper>\r\n  );\r\n};\r\nAnnouncer.defaultProps = {\r\n  className: ''\r\n};\r\n\r\nexport default withWidth()(Announcer);\r\n","import Announcer from './Announcer';\r\n\r\nexport default Announcer;\r\n","import React from 'react';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport {\r\n  Grid,\r\n  Paper,\r\n  InputBase,\r\n  IconButton,\r\n  Tooltip,\r\n  TablePagination\r\n} from '@material-ui/core';\r\nimport {\r\n  ToggleButtonGroup,\r\n  ToggleButton\r\n} from '@material-ui/lab';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport NameIcon from '@material-ui/icons/SortByAlpha';\r\nimport LeechersIcon from '@material-ui/icons/CloudDownloadOutlined';\r\nimport SeedersIcon from '@material-ui/icons/CloudUploadOutlined';\r\nimport Announcer from './Announcer';\r\n\r\nimport { Announcer as AnnouncerType } from '../../modules/joal-api/types'\r\n\r\n\r\nfunction desc<T>(a: T, b: T, orderBy: keyof T) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\ntype Order = 'asc' | 'desc';\r\n\r\nconst getSorting = <K extends keyof AnnouncerType>(\r\n  order: Order,\r\n  orderBy?: K\r\n): (a: AnnouncerType, b: AnnouncerType) => number => {\r\n  if (orderBy === '' || orderBy === undefined) {\r\n    return (a, b) => 0\r\n  }\r\n  return order === 'desc' ? (a, b) => desc(a, b, orderBy) : (a, b) => -desc(a, b, orderBy);\r\n}\r\n\r\nconst getFiltering = (searchFilter: string): (a: AnnouncerType) => boolean => {\r\n  if (searchFilter === '' || searchFilter === undefined) {\r\n    return a => true\r\n  }\r\n  return a => a.torrentName.toLowerCase().includes(searchFilter.toLowerCase())\r\n}\r\n\r\n\r\ninterface EnhancedTableHeadProps {\r\n  search: string,\r\n  onRequestSearch: (search: string) => void\r\n  order: Order,\r\n  orderBy?: keyof AnnouncerType\r\n  onRequestSort: (order: Order, property?: keyof AnnouncerType) => void\r\n}\r\n\r\nconst tableHeadUseStyles = makeStyles((theme: Theme) => ({\r\n  searchBarPaper: {\r\n    padding: '2px 4px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  searchBar: {\r\n    marginLeft: 8,\r\n    flex: 1,\r\n  },\r\n  searchBarIcon: {\r\n    padding: 10,\r\n  },\r\n  sortActionsContainer: {\r\n    [theme.breakpoints.down('xs')]: {\r\n      width: '100%',\r\n    },\r\n    width: 'none'\r\n  },\r\n  sortButtonGroup: (props: { hasSortSelected: boolean }) => ({\r\n    backgroundColor: props.hasSortSelected ? '' : 'transparent'\r\n  }),\r\n  toogleButtonWhenNoSortSelection: {\r\n    borderColor: 'transparent'\r\n  }\r\n}));\r\n\r\nfunction EnhancedTableHead(props: EnhancedTableHeadProps) {\r\n  const {\r\n    search,\r\n    onRequestSearch,\r\n    order,\r\n    orderBy,\r\n    onRequestSort\r\n  } = props;\r\n  const classes = tableHeadUseStyles({ hasSortSelected: orderBy !== undefined });\r\n\r\n  function onClickSort(event: React.MouseEvent<unknown>, property?: keyof AnnouncerType) {\r\n    // The value is null when the user clic one more time on the same tile\r\n    if (orderBy !== property && property !== null) {\r\n      onRequestSort('asc', property);\r\n      return;\r\n    }\r\n\r\n    // User clicked the same property once again\r\n    if (order === 'asc') {\r\n      onRequestSort('desc', orderBy);\r\n      return;\r\n    }\r\n    if (order === 'desc') {\r\n      onRequestSort('asc', undefined);\r\n      return; // eslint-disable-line no-useless-return\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Grid container spacing={1}>\r\n      <Grid item xs>\r\n        <Paper className={classes.searchBarPaper} elevation={1}>\r\n          <InputBase className={classes.searchBar} value={search} onChange={e => onRequestSearch(e.target.value)} placeholder=\"Filter by name\" />\r\n          <IconButton className={classes.searchBarIcon} aria-label=\"Search\">\r\n            <SearchIcon />\r\n          </IconButton>\r\n        </Paper>\r\n      </Grid>\r\n      <Grid item className={classes.sortActionsContainer}>\r\n        <ToggleButtonGroup className={`${classes.sortButtonGroup}`} selected={orderBy !== undefined} value={orderBy} exclusive onChange={(e, v) => onClickSort(e, v)}>\r\n          <Tooltip title=\"Sort by name\" placement=\"top\">\r\n            <ToggleButton classes={orderBy === undefined ? {root: classes.toogleButtonWhenNoSortSelection}: {}} selected={orderBy === 'torrentName'} value=\"torrentName\">\r\n              <NameIcon />\r\n            </ToggleButton>\r\n          </Tooltip>\r\n          <Tooltip title=\"Sort by leechers\" placement=\"top\">\r\n            <ToggleButton classes={orderBy === undefined ? {root: classes.toogleButtonWhenNoSortSelection}: {}} selected={orderBy === 'lastKnownLeechers'} value=\"lastKnownLeechers\">\r\n              <LeechersIcon />\r\n            </ToggleButton>\r\n          </Tooltip>\r\n          <Tooltip title=\"Sort by seeders\" placement=\"top\">\r\n            <ToggleButton classes={orderBy === undefined ? {root: classes.toogleButtonWhenNoSortSelection}: {}} selected={orderBy === 'lastKnownSeeders'} value=\"lastKnownSeeders\">\r\n              <SeedersIcon />\r\n            </ToggleButton>\r\n          </Tooltip>\r\n        </ToggleButtonGroup>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\n\r\nconst EnhancedTableToolbar = () => {\r\n\r\n  return (\r\n    <div>{''}</div>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    announersList: {\r\n      marginTop: theme.spacing(1),\r\n      [theme.breakpoints.up('md')]: {\r\n        marginLeft: theme.spacing(2),\r\n      }\r\n    },\r\n    announcer: {\r\n      [theme.breakpoints.down('md')]: {\r\n        marginBottom: theme.spacing(2),\r\n      },\r\n      [theme.breakpoints.up('md')]: {\r\n        marginBottom: theme.spacing(1),\r\n      }\r\n    }\r\n  })\r\n);\r\n\r\ninterface AnnouncerTableProps {\r\n  announcers: Array<AnnouncerType>\r\n  onClickDeleteTorrent: (infoHash: string) => void\r\n}\r\n\r\nfunction EnhancedTable(props: AnnouncerTableProps) {\r\n  const classes = useStyles();\r\n  const [search, setSearch] = React.useState<string>('');\r\n  const [order, setOrder] = React.useState<Order>('asc');\r\n  const [orderBy, setOrderBy] = React.useState<undefined | keyof AnnouncerType>(undefined);\r\n  const [page, setPage] = React.useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(10);\r\n  const { announcers, onClickDeleteTorrent } = props;\r\n\r\n  React.useEffect(() => {\r\n    // on refresh the number of announcers may have changed, so we may need to reset the page count to prevent page index to be out of bounds\r\n    if (page > (Math.ceil(announcers.length / rowsPerPage) - 1)) {\r\n      setPage(0);\r\n    }\r\n  }, [page, announcers.length, rowsPerPage]);\r\n\r\n  function handleRequestSort(order: Order, property?: keyof AnnouncerType) {\r\n    setOrder(order);\r\n    setOrderBy(property);\r\n  }\r\n\r\n  function handleChangePage(event: unknown, newPage: number) {\r\n    setPage(newPage);\r\n  }\r\n\r\n  function handleChangeRowsPerPage(event: React.ChangeEvent<HTMLInputElement>) {\r\n    setRowsPerPage(+event.target.value);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <EnhancedTableToolbar />\r\n      <EnhancedTableHead\r\n        search={search}\r\n        onRequestSearch={setSearch}\r\n        order={order}\r\n        orderBy={orderBy}\r\n        onRequestSort={handleRequestSort}\r\n      />\r\n      <Grid container spacing={1}>\r\n        <Grid item xs={12} className={classes.announersList}>\r\n          {announcers\r\n            .filter(getFiltering(search))\r\n            .sort(getSorting(order, orderBy))\r\n            .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n            .map(announcer => {\r\n                return (\r\n                  <div\r\n                    key={announcer.infoHash}\r\n                  >\r\n                    <Announcer className={classes.announcer} announcer={announcer} onClickDeleteTorrent={onClickDeleteTorrent} />\r\n                  </div>\r\n                )\r\n            })\r\n          }\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <TablePagination\r\n            rowsPerPageOptions={[10, 25, 50]}\r\n            component=\"div\"\r\n            count={announcers.length}\r\n            rowsPerPage={rowsPerPage}\r\n            page={page}\r\n            backIconButtonProps={{\r\n              'aria-label': 'Previous Page',\r\n            }}\r\n            nextIconButtonProps={{\r\n              'aria-label': 'Next Page',\r\n            }}\r\n            onChangePage={handleChangePage}\r\n            onChangeRowsPerPage={handleChangeRowsPerPage}\r\n          /> \r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EnhancedTable;","import { Dispatch } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport Announcers from './torrentsTable.component';\r\nimport { changeSearchFilterText, changeTorrentSort } from './torrentsTable.actions';\r\nimport { deleteTorrent } from '../../modules/joal-api';\r\nimport { createSelector } from 'reselect'\r\n\r\nimport { JoalState } from '../../reducers/types';\r\nimport { Announcer as AnnouncerType } from '../../modules/joal-api/types';\r\n\r\nconst getSearchFilter = (state: JoalState) => state.app.torrentsTable.searchFilter;\r\nconst getAnnouncers = (state: JoalState) => state.api.announcers;\r\nconst getFilteredAnnouncers = createSelector(\r\n  [ getSearchFilter, getAnnouncers ],\r\n  (searchFilter: string, announcers: Array<AnnouncerType>) => {\r\n    if (searchFilter.trim().length === 0) {\r\n      return announcers;\r\n    }\r\n    const filterText = searchFilter.toLowerCase();\r\n    return announcers.filter(a => a.torrentName.toLowerCase().includes(filterText));\r\n  }\r\n)\r\n\r\nconst getSortProperty = (state: JoalState) => state.app.torrentsTable.sortProperty;\r\nconst getSortDirection = (state: JoalState) => state.app.torrentsTable.sortDirection;\r\nconst getSortedAndFilteredAnnouncers = createSelector(\r\n  [ getSortProperty, getSortDirection, getFilteredAnnouncers ],\r\n  (sortProperty: string, sortDirection: string, filteredAnnouncers: Array<AnnouncerType>) => {\r\n    if (sortProperty === '' || sortProperty === undefined || sortProperty === null) {\r\n      return filteredAnnouncers;\r\n    }\r\n\r\n    // Spread the array to sort on a copy of the original, it will prevent side effects on the original array\r\n    return [...filteredAnnouncers].sort((t1: any, t2: any) => {\r\n      if (t1[sortProperty] < t2[sortProperty]) return sortDirection === 'asc' ? -1 : 1;\r\n      if (t1[sortProperty] === t2[sortProperty]) return 0;\r\n      return sortDirection === 'asc' ? 1 : -1;\r\n    });\r\n  }\r\n)\r\n\r\nfunction mapStateToProps(state: JoalState) {\r\n  return {\r\n    announcers: getSortedAndFilteredAnnouncers(state),\r\n    searchFilter: state.app.torrentsTable.searchFilter,\r\n    sortProperty: state.app.torrentsTable.sortProperty,\r\n    sortDirection: state.app.torrentsTable.sortDirection,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => {\r\n  return {\r\n    onFilterTextChange: (text: string) => dispatch(changeSearchFilterText(text)),\r\n    onSortChange: (sortProperty: string , sortDirection: string) => dispatch(changeTorrentSort(sortProperty, sortDirection)),\r\n    onClickDeleteTorrent: (infoHash: string) => deleteTorrent(infoHash),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Announcers);\r\n","import TorrentsTableContainer from './torrentsTable.container';\r\n\r\nexport default TorrentsTableContainer;\r\n","import React from 'react';\r\nimport ReactTooltip from 'react-tooltip';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { withTheme, createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Zoom from '@material-ui/core/Zoom';\r\nimport ClientInfo from '../../components/ClientInfo';\r\nimport AbsoluteOverlayFetchingIndicator from '../../components/Generics/FetchingIndicator/AbsoluteOverlayFetchingIndicator';\r\nimport UiConfigChangerButton from '../../components/UiConfigChanger';\r\nimport TorrentsTable from '../../components/TorrentsTable';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    relative: {\r\n      position: 'relative'\r\n    },\r\n    addButton: {\r\n      position: 'fixed',\r\n      bottom: 75,\r\n      right: theme.spacing(2),\r\n      [theme.breakpoints.down('sm')]: {\r\n        bottom: 65,\r\n        right: 6,\r\n      },\r\n    },\r\n    addButtonInput: {\r\n      display: 'none'\r\n    },\r\n    announcers: {\r\n      marginBottom: 110\r\n    }\r\n  })\r\n);\r\n\r\n\r\ntype Props = {\r\n  theme: Theme,\r\n  className?: string,\r\n  isStarted: boolean,\r\n  isConnectedToWebSocket: boolean,\r\n  isClientGlobalStatePending: boolean,\r\n  shouldDisplayConfigChangerButton: boolean,\r\n  uploadTorrentFiles: (files: Array<File>) => void\r\n};\r\n\r\nconst Dashboard = (props: Props) => {\r\n  const classes = useStyles()\r\n  const {\r\n    className: classNameProps,\r\n    shouldDisplayConfigChangerButton, theme, isConnectedToWebSocket, isClientGlobalStatePending, isStarted,\r\n    uploadTorrentFiles\r\n  } = props;\r\n\r\n  return (\r\n    <Grid\r\n      container\r\n      spacing={2}\r\n      direction=\"row\"\r\n      className={classNameProps}\r\n    >\r\n      <Grid item xs={12} md={4} lg={3}>\r\n        {shouldDisplayConfigChangerButton && <UiConfigChangerButton style={{ marginBottom: 6 }} />}\r\n        <div className={classes.relative}>\r\n          <AbsoluteOverlayFetchingIndicator active={!isConnectedToWebSocket || isClientGlobalStatePending} />\r\n          <ClientInfo />\r\n        </div>\r\n      </Grid>\r\n      {isStarted && (\r\n        <Grid item xs={12} md={8} lg={9} className={classes.announcers}>\r\n          <TorrentsTable />\r\n        </Grid>\r\n      )}\r\n      <ReactTooltip place=\"top\" type=\"dark\" effect=\"float\" />\r\n\r\n      <input\r\n        type=\"file\"\r\n        accept=\".torrent\"\r\n        multiple\r\n        id=\"add-torrent-file-button\"\r\n        className={classes.addButtonInput}\r\n        onChange={(e) => {\r\n          if (e.target.files != null) {\r\n            uploadTorrentFiles(Array.from(e.target.files))\r\n          }\r\n        }}\r\n      />\r\n      <Zoom\r\n        in={isStarted}\r\n        timeout={{ enter: theme.transitions.duration.enteringScreen, exit: theme.transitions.duration.leavingScreen }}\r\n        style={{\r\n          transitionDelay: `${theme.transitions.duration.enteringScreen}ms`,\r\n        }}\r\n        unmountOnExit\r\n      >\r\n        <label htmlFor=\"add-torrent-file-button\" className={classes.addButton}> {/* eslint-disable-line */}\r\n          <Tooltip title=\"Add a torrent\" aria-label=\"Add a torrent\" placement=\"left\">\r\n            <Fab component=\"div\" disabled={!isStarted} color=\"secondary\" aria-label=\"Add\">\r\n              <AddIcon />\r\n            </Fab>\r\n          </Tooltip>\r\n        </label>\r\n      </Zoom>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nDashboard.defaultProps = {\r\n  className: ''\r\n};\r\n\r\nexport default withTheme(Dashboard);\r\n","import { connect } from 'react-redux';\r\nimport isElectron from 'is-electron';\r\nimport Dashboard from './dashboard.component';\r\nimport { uploadTorrents } from '../../modules/joal-api';\r\n\r\nimport { JoalState } from '../../reducers/types';\r\n\r\nfunction mapStateToProps(state: JoalState) {\r\n  return {\r\n    isStarted: state.api.client.isStarted,\r\n    isConnectedToWebSocket: state.api.stomp.isConnected,\r\n    isClientGlobalStatePending: state.api.client.isFetching,\r\n    shouldDisplayConfigChangerButton: !isElectron()\r\n  };\r\n}\r\nfunction mapDispatchToProps() {\r\n  return {\r\n    uploadTorrentFiles: (files: Array<File>) => uploadTorrents(files)\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);\r\n","import Dashboard from './dashboard.container';\r\n\r\nexport default Dashboard;\r\n","import React from 'react';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Select from '@material-ui/core/Select';\r\nimport Input from '@material-ui/core/Input';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport classnames from 'classnames';\r\nimport AbsoluteOverlayFetchingIndicator from '../../components/Generics/FetchingIndicator/AbsoluteOverlayFetchingIndicator';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    container: {\r\n      padding: theme.spacing(2),\r\n      position: 'relative',\r\n    },\r\n    discardChangesButton: {\r\n      marginRight: theme.spacing(2)\r\n    },\r\n    formInput: {\r\n      marginBottom: theme.spacing(3),\r\n      minWidth: 180\r\n    },\r\n    rightSpaced: {\r\n      marginRight: theme.spacing(2)\r\n    }\r\n  })\r\n);\r\n\r\n\r\nconst ITEM_HEIGHT = 48;\r\nconst MenuProps = {\r\n  PaperProps: {\r\n    style: {\r\n      maxHeight: ITEM_HEIGHT * 6\r\n    },\r\n  },\r\n};\r\n\r\ntype Props = {\r\n  isLocalConfigChanged: boolean,\r\n  config: any,\r\n  availableClients: Array<string>,\r\n  isConnectedToWebSocket: boolean,\r\n  discardLocalConfigChanges: () => void,\r\n  onSettingsChange: (config: any) => void,\r\n  onClickSave: (config: any) => void\r\n};\r\n\r\nconst Settings = (props: Props) => {\r\n  const classes = useStyles();\r\n  const {\r\n    isConnectedToWebSocket,\r\n    discardLocalConfigChanges, onSettingsChange, onClickSave,\r\n    availableClients, config, isLocalConfigChanged\r\n  } = props;\r\n\r\n  const valueHasChanged = (newValue: any) => onSettingsChange(Object.assign(\r\n    {},\r\n    config,\r\n    newValue\r\n  ));\r\n\r\n  return (\r\n    <Grid\r\n      container\r\n      direction=\"column\"\r\n      justify=\"center\"\r\n      alignItems=\"center\"\r\n    >\r\n      <Grid item xs={12} md={6}>\r\n        <Paper\r\n          className={classes.container}\r\n          elevation={2}\r\n        >\r\n          <AbsoluteOverlayFetchingIndicator active={!isConnectedToWebSocket} />\r\n          <Grid\r\n            container\r\n            direction=\"row\"\r\n          >\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                className={classnames(classes.formInput, classes.rightSpaced)}\r\n                label=\"Min upload rate (kB/s)\"\r\n                type=\"number\"\r\n                inputProps={{ min:0 }}\r\n                value={config.minUploadRate}\r\n                onChange={(event) => {\r\n                  const value = event.target.value === '' ? '' : parseInt(event.target.value, 10);\r\n                  valueHasChanged({ minUploadRate: value });\r\n                }}\r\n              />\r\n              <TextField\r\n                className={classes.formInput}\r\n                label=\"Max upload rate (kB/s)\"\r\n                type=\"number\"\r\n                inputProps={{ min:0 }}\r\n                value={config.maxUploadRate}\r\n                onChange={(event) => {\r\n                  const value = event.target.value === '' ? '' : parseInt(event.target.value, 10);\r\n                  valueHasChanged({ maxUploadRate: value });\r\n                }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <FormControl className={classes.formInput}>\r\n                <InputLabel htmlFor=\"torrent-client-selector\">Torrent client</InputLabel>\r\n                <Select\r\n                  value={config.client}\r\n                  onChange={(event) => valueHasChanged({ client: event.target.value })}\r\n                  input={<Input name=\"torrent-client\" id=\"torrent-client-selector\" />}\r\n                  MenuProps={MenuProps}\r\n                >\r\n                  {availableClients.map(client => (\r\n                    <MenuItem\r\n                      key={client}\r\n                      value={client}\r\n                    >\r\n                      {client.substring(0, client.lastIndexOf('.'))}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                className={classes.formInput}\r\n                label=\"Simultaneous seed\"\r\n                type=\"number\"\r\n                inputProps={{ min:0 }}\r\n                value={config.simultaneousSeed}\r\n                onChange={(event) => {\r\n                  const value = event.target.value === '' ? '' : parseInt(event.target.value, 10);\r\n                  valueHasChanged({ simultaneousSeed: value });\r\n                }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <div className={classes.formInput}>\r\n                <FormControlLabel\r\n                  control={(\r\n                    <Checkbox\r\n                      style={{ paddingBottom: 0, paddingTop: 0 }}\r\n                      color=\"primary\"\r\n                      checked={config.keepTorrentWithZeroLeechers}\r\n                      onChange={(e, checked) => valueHasChanged({ keepTorrentWithZeroLeechers: checked })}\r\n                    />\r\n                  )}\r\n                  label=\"Keep seeding torrents even with no peers\"\r\n                />\r\n                <FormHelperText style={{ marginTop: 0 }}>\r\n                  If checked, when a torrent reach 0 peers it will seed at 0 kB/s. Otherwise, when a torrent reach 0 peers it will be removed.\r\n                </FormHelperText>\r\n              </div>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <div className={classes.formInput}>\r\n                <FormControl className={classes.formInput}>\r\n                  <TextField\r\n                    className={classes.formInput}\r\n                    label=\"Max Upload Ratio\"\r\n                    type=\"number\"\r\n                    inputProps={{ min: -1.0, step: 0.1, max: 100.0 }}\r\n                    value={ config.uploadRatioTarget || -1.0 }\r\n                    onChange={(event) => {\r\n                      var value = event.target.value === '' ? '' : parseFloat(event.target.value);\r\n                      if(value < -1) value = -1.0;\r\n                      valueHasChanged({ uploadRatioTarget: value });\r\n                    }}\r\n                    helperText=\"Set to -1.0 to seed indefinitely. Note that the uploaded amount is reset to 0 for ratio target every time Joal is restarted.\"\r\n                  />\r\n                </FormControl>\r\n              </div>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid container direction=\"row\" justify=\"flex-end\" alignItems=\"center\">\r\n            <Grid item>\r\n              { isLocalConfigChanged && (\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  onClick={() => discardLocalConfigChanges()}\r\n                  color=\"secondary\"\r\n                  className={classes.discardChangesButton}\r\n                >\r\n                  Discard\r\n                </Button>\r\n              )}\r\n              <Button\r\n                variant=\"contained\"\r\n                onClick={() => onClickSave(config)}\r\n                color=\"secondary\"\r\n              >\r\n                Save\r\n              </Button>\r\n            </Grid>\r\n          </Grid>\r\n        </Paper>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n","import { Dispatch } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport SettingsComponent from './settings.component';\r\nimport { localConfigHasChanged, discardLocalConfigChanges } from './settings.actions';\r\nimport { sendConfigToServer } from '../../modules/joal-api';\r\n\r\nimport { Config } from '../../modules/joal-api/types';\r\nimport { JoalState } from '../../reducers/types';\r\n\r\nfunction mapStateToProps(state: JoalState) {\r\n  return {\r\n    // if local config is set it means the user has modified the config, so we show it\r\n    isLocalConfigChanged: state.app.config.localConfig !== undefined,\r\n    config: state.app.config.localConfig || state.api.settings.config,\r\n    availableClients: state.api.settings.availableClients,\r\n    isConnectedToWebSocket: state.api.stomp.isConnected\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n  return ({\r\n    discardLocalConfigChanges: () => dispatch(discardLocalConfigChanges()),\r\n    onSettingsChange: (config: Config) => dispatch(localConfigHasChanged(config)),\r\n    onClickSave: (config: Config) => sendConfigToServer(config)\r\n  });\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SettingsComponent);\r\n","import Settings from './settings.container';\r\n\r\nexport default Settings;\r\n","import React from 'react';\r\nimport IconWarning from '@material-ui/icons/Warning';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport orange from '@material-ui/core/colors/orange';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    container: {\r\n      textAlign: 'center',\r\n      marginTop: 100,\r\n      height: '100%'\r\n    }\r\n  })\r\n);\r\n\r\n\r\ntype Props = {\r\n  events: Array<string>\r\n};\r\n\r\nconst EventHistory = ({ events }: Props) => {\r\n  const classes = useStyles();\r\n  if (events) {\r\n    // TODO: implement me. this if is just a placeholder to prevent no-unused-params\r\n  }\r\n  return (\r\n    <Grid container className={classes.container}>\r\n      <Grid item xs={12}>\r\n        <IconWarning\r\n          viewBox=\"0 0 24 20\"\r\n          style={{ color: orange[500], height: 200, width: 166 }}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <b>Hey it looks like you discovered the super secret tab !</b>\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        This tab will tell you what was the last actions JOAL has performed. Unfortunately this is still under development, check it back later ;)\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default EventHistory;\r\n","import { connect } from 'react-redux';\r\nimport EventHistoryComponent from './event-history.component';\r\n\r\nfunction mapStateToProps() {\r\n  return {\r\n    events: []\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(EventHistoryComponent);\r\n","import EventHistoryContainer from './event-history.container';\r\n\r\nexport default EventHistoryContainer;\r\n","import React from 'react';\r\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\r\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport DashboardIcon from '@material-ui/icons/Dashboard';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport LogsIcon from '@material-ui/icons/Sms';\r\n\r\ntype NavigationBarProps = {\r\n  currentPath: string,\r\n  onClickDashboard: () => void,\r\n  onClickSettings: () => void,\r\n  onClickLogs: () => void\r\n};\r\n\r\nconst NavigationBar: React.FC<NavigationBarProps> = (props) => {\r\n  const {\r\n    currentPath,\r\n    onClickDashboard,\r\n    onClickSettings,\r\n    onClickLogs\r\n  } = props;\r\n\r\n  const whichIndex = (whichPath: string) => {\r\n    if (whichPath === '/') {\r\n      return 0;\r\n    }\r\n    if (whichPath === '/settings') {\r\n      return 1;\r\n    }\r\n    return 2;\r\n  };\r\n\r\n  const onChangeTab = (event: React.ChangeEvent<{}>, index: number) => {\r\n    if (index === 0) onClickDashboard();\r\n    else if (index === 1) onClickSettings();\r\n    else if (index === 2) onClickLogs();\r\n  };\r\n\r\n  return (\r\n    <Paper elevation={1}>\r\n      <BottomNavigation\r\n        showLabels\r\n        value={whichIndex(currentPath)}\r\n        onChange={onChangeTab}\r\n      >\r\n        <BottomNavigationAction\r\n          label=\"dashboard\"\r\n          icon={<DashboardIcon />}\r\n        />\r\n        <BottomNavigationAction\r\n          label=\"configuration\"\r\n          icon={<SettingsIcon />}\r\n        />\r\n        <BottomNavigationAction\r\n          label=\"history\"\r\n          icon={<LogsIcon />}\r\n        />\r\n      </BottomNavigation>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default NavigationBar;\r\n","import NavigationBarContainer from './navigationBar.container';\r\n\r\nexport default NavigationBarContainer;\r\n","import { Dispatch } from 'redux';\r\nimport { connect } from 'react-redux';\r\nimport NavigationBar from './navigationBar.component';\r\nimport { push } from 'connected-react-router';\r\n\r\nimport { JoalState } from '../../reducers/types';\r\n\r\nconst mapStateToProps = (state: JoalState) => {\r\n  return {\r\n    currentPath: state.router.location.pathname\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch) => {\r\n  return {\r\n    onClickDashboard: () => dispatch(push('/')),\r\n    onClickSettings: () => dispatch(push('/settings')),\r\n    onClickLogs: () => dispatch(push('/history'))\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NavigationBar);\r\n","import React, { ReactNode } from 'react';\r\nimport { useDropzone } from 'react-dropzone'\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport classnames from 'classnames';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    dropzone: {\r\n      position: 'absolute',\r\n      top: 0,\r\n      bottom: 0,\r\n      left: 0,\r\n      right: 0,\r\n    },\r\n    overlay: {\r\n      zIndex: 16777270,\r\n      position: 'fixed',\r\n      top: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      left: 0,\r\n      backgroundColor: 'rgba(156, 155, 155, 0.86)',\r\n      color: 'rgba(130, 130, 130, 0.75)',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center'\r\n    }\r\n  })\r\n);\r\n\r\ninterface TorrentDropZoneProps {\r\n  onDrop: (acceptedFiles: Array<File>, rejectedFiles:Array<File>) => void,\r\n  children: ReactNode,\r\n}\r\n\r\nconst TorrentDropZone: React.FC<TorrentDropZoneProps> = (props) => {\r\n  const classes = useStyles();\r\n  const { children } = props;\r\n\r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    onDrop: (accepted, rejected) => props.onDrop(accepted, rejected),\r\n    noClick: true,\r\n    noKeyboard: true,\r\n    multiple: true\r\n  })\r\n  \r\n  const rootProps = getRootProps({\r\n    onClick: (e) => { e.stopPropagation(); } // Prevent react dropzone to execute his own handler which contains a \"event.preventDefault\". Since the dropzone embed the whole page it would prevent other input click\r\n  });\r\n\r\n  return (\r\n    <div {...rootProps} className={classes.dropzone}>\r\n      <input {...getInputProps()} />\r\n      {children}\r\n      {isDragActive && (\r\n        <div className={classes.overlay}>\r\n          <i className={classnames('fa', 'fa-download', 'fa-5x')} aria-hidden=\"true\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TorrentDropZone;\r\n","import React from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport classnames from 'classnames';\r\nimport { ThemeModifier } from '../../modules/theme';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    root: {\r\n      flexGrow: 1,\r\n    },\r\n    grow: {\r\n      flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n      marginLeft: -12,\r\n      marginRight: 20,\r\n    }\r\n  })\r\n);\r\n\r\ntype JoalAppBarProps = {\r\n  className?: any\r\n}\r\n\r\nconst JoalAppBar: React.FC<JoalAppBarProps> = (props) => {\r\n  const classes = useStyles();\r\n  const {\r\n    className: classNameProps\r\n  } = props;\r\n\r\n  return (\r\n    <div className={classnames(classes.root, classNameProps)}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\r\n            Joal\r\n          </Typography>\r\n          <ThemeModifier />\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n};\r\nJoalAppBar.defaultProps = {\r\n  className: {}\r\n};\r\n\r\nexport default JoalAppBar;\r\n","import JoalAppBar from './appbar.component';\r\n\r\nexport default JoalAppBar;\r\n","import React, { ReactNode } from 'react';\r\n\r\n\r\ntype BaseIconProps = {\r\n  className?: string,\r\n  children: ReactNode\r\n}\r\n\r\nconst BaseIcon: React.FC<BaseIconProps> = (props) => {\r\n  const { className: classNameProps, children } = props\r\n\r\n  return (\r\n    <svg\r\n      className={classNameProps}\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"24\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      style={{ minWidth: 24 }}\r\n    >\r\n      {children}\r\n    </svg>\r\n  );\r\n}\r\nBaseIcon.defaultProps = {\r\n  className: ''\r\n};\r\n\r\nexport default BaseIcon;\r\n","import React from 'react';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport BaseIcon from './BaseIcon';\r\nimport classnames from 'classnames';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    icon: {\r\n      stroke: '#2E9AFE'\r\n    }\r\n  })\r\n);\r\n\r\ntype InfoIconProps = {\r\n  className?: string\r\n}\r\n\r\nconst InfoIcon:React.FC<InfoIconProps> = (props) => {\r\n  const classes = useStyles();\r\n  const { className: classNameProps } = props;\r\n\r\n  return (\r\n    <BaseIcon className={classnames(classes.icon, classNameProps)}>\r\n      <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n      <line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\" />\r\n      <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"8\" />\r\n    </BaseIcon>\r\n  );\r\n}\r\nInfoIcon.defaultProps = {\r\n  className: ''\r\n};\r\n\r\nexport default InfoIcon;\r\n","import React from 'react';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport BaseIcon from './BaseIcon';\r\nimport classnames from 'classnames';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    icon: {\r\n      stroke: '#31B404'\r\n    }\r\n  })\r\n);\r\n\r\ntype SuccessIconProps = {\r\n  className?: string\r\n}\r\n\r\nconst SuccessIcon:React.FC<SuccessIconProps> = (props) => {\r\n  const classes = useStyles();\r\n  const { className: classNameProps } = props;\r\n\r\n  return (\r\n    <BaseIcon className={classnames(classes.icon, classNameProps)}>\r\n      <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\" />\r\n      <polyline points=\"22 4 12 14.01 9 11.01\" />\r\n    </BaseIcon>\r\n  );\r\n}\r\nSuccessIcon.defaultProps = {\r\n  className: ''\r\n};\r\n\r\nexport default SuccessIcon;\r\n","import React from 'react';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport BaseIcon from './BaseIcon';\r\nimport classnames from 'classnames';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    icon: {\r\n      stroke: '#FF0040'\r\n    }\r\n  })\r\n);\r\n\r\ntype ErrorIconProps = {\r\n  className?: string\r\n}\r\n\r\nconst ErrorIcon: React.FC<ErrorIconProps> = (props) => {\r\n  const classes = useStyles();\r\n  const { className: classNameProps } = props;\r\n\r\n  return (\r\n    <BaseIcon className={classnames(classes.icon, classNameProps)}>\r\n      <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n      <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\" />\r\n      <line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"16\" />\r\n    </BaseIcon>\r\n  );\r\n}\r\nErrorIcon.defaultProps = {\r\n  className: ''\r\n};\r\n\r\nexport default ErrorIcon;\r\n","import React from 'react';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport BaseIcon from './BaseIcon';\r\nimport classnames from 'classnames';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    icon: {\r\n      stroke: '#000000'\r\n    }\r\n  })\r\n);\r\n\r\ntype CloseIconProps = {\r\n  className?: string\r\n}\r\n\r\nconst CloseIcon: React.FC<CloseIconProps> = (props) => {\r\n  const classes = useStyles();\r\n  const { className: classNameProps } = props;\r\n\r\n  return (\r\n    <BaseIcon className={classnames(classes.icon, classNameProps)}>\r\n      <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\r\n      <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\r\n    </BaseIcon>\r\n  );\r\n}\r\nCloseIcon.defaultProps = {\r\n  className: ''\r\n};\r\n\r\nexport default CloseIcon;\r\n","import React from 'react';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport { AlertComponentPropsWithStyle } from 'react-alert';\r\nimport InfoIcon from './icons/InfoIcon';\r\nimport SuccessIcon from './icons/SuccessIcon';\r\nimport ErrorIcon from './icons/ErrorIcon';\r\nimport CloseIcon from './icons/CloseIcon';\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    alert: {\r\n      // boxShadow: '0 8px 12px 0 rgba(0,0,0,0.3)',\r\n      backgroundColor: `${theme.palette.type === 'dark' ? '#333' : '#fff'}`,\r\n      borderRadius: 3,\r\n      padding: 10,\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      boxShadow: '0px 2px 2px 2px rgba(0, 0, 0, 0.03)',\r\n      fontFamily: 'Arial',\r\n      fontSize: 11,\r\n      width: 350,\r\n      [theme.breakpoints.down('xs')]: {\r\n        width: '75vw'\r\n      },\r\n      boxSizing: 'border-box',\r\n      position: 'relative'\r\n    },\r\n    message: {\r\n      color: `${theme.palette.type === 'dark' ? '#fff' : '#333'}`,\r\n      paddingRight: 40,\r\n      textAlign: 'center',\r\n      textTransform: 'uppercase',\r\n    },\r\n    statusIcon: {\r\n      marginRight: 15\r\n    },\r\n    closeButton: {\r\n      padding: 0,\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      position: 'absolute',\r\n      right: 0,\r\n      top: 0,\r\n      bottom: 0,\r\n      width: 40,\r\n      border: 'none',\r\n      backgroundColor: theme.palette.type === 'dark' ? '#444' : '#f3f3f3',\r\n      cursor: 'pointer',\r\n    },\r\n    closeIconOverride: {\r\n      stroke: theme.palette.type === 'dark' ? '#BBB' : '#000'\r\n    }\r\n  })\r\n);\r\n\r\ninterface AlertTemplateProps extends AlertComponentPropsWithStyle {\r\n}\r\n\r\nconst AlertTemplate: React.FC<AlertTemplateProps> = (props) => {\r\n  const classes = useStyles();\r\n  const {\r\n    message, options, style, close\r\n  } = props;\r\n  return (\r\n    // the style contains only the margin given as offset\r\n    // options contains all alert given options\r\n    // message is the alert message...\r\n    // close is a function that closes the alert\r\n    <div className={classes.alert} style={style}>\r\n      {options.type === 'success' && <SuccessIcon className={classes.statusIcon} />}\r\n      {options.type === 'info' && <InfoIcon className={classes.statusIcon} />}\r\n      {options.type === 'error' && <ErrorIcon className={classes.statusIcon} />}\r\n      <span className={classes.message} style={{ flex: 2 }}>{message}</span>\r\n      <button className={classes.closeButton} onClick={close} type=\"button\">\r\n        <CloseIcon className={classes.closeIconOverride} />\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AlertTemplate;\r\n","import AlertTemplate from './alert-template.component';\r\n\r\nexport default AlertTemplate;\r\n","import React, { Component } from 'react';\r\nimport { Dispatch } from 'redux';\r\nimport { withAlert, AlertManager } from 'react-alert';\r\nimport { connect } from 'react-redux';\r\nimport { removeNotification } from './alerts.actions';\r\n\r\nimport { JoalState } from '../../reducers/types';\r\nimport { Notification } from './types';\r\n\r\ninterface JoalAlertDisplayerProps {\r\n  alert: AlertManager, // given by withAlert wrapper\r\n  notifs: Array<Notification>,\r\n  shouldShowDirtyConfNotif: boolean,\r\n  onMessageClosed: (id: string) => void\r\n}\r\n\r\nclass JoalAlertDisplayer extends Component<JoalAlertDisplayerProps> {\r\n\r\n  shouldComponentUpdate(nextProps: JoalAlertDisplayerProps) {\r\n    const { notifs: currentNotifs, shouldShowDirtyConfNotif: currentShouldShowDirtyConfNotif } = this.props;\r\n    return (currentNotifs !== nextProps.notifs || currentShouldShowDirtyConfNotif !== nextProps.shouldShowDirtyConfNotif);\r\n  }\r\n\r\n  componentDidUpdate(prevProps: JoalAlertDisplayerProps) {\r\n    const { shouldShowDirtyConfNotif, alert, notifs } = this.props;\r\n    if (prevProps.shouldShowDirtyConfNotif !== shouldShowDirtyConfNotif) {\r\n      if (shouldShowDirtyConfNotif === true) {\r\n        alert.info('Config wont be refreshed until you restart JOAL');\r\n      }\r\n    }\r\n\r\n    if (notifs === prevProps.notifs) {\r\n      return;\r\n    }\r\n\r\n    // Add new notifications\r\n    notifs.forEach(newNotif => {\r\n      if (prevProps.notifs.findIndex(n => n.id === newNotif.id) === -1) {\r\n        this.showNotification(newNotif);\r\n      }\r\n    });\r\n  }\r\n\r\n  showNotification(notification: Notification) {\r\n    const { alert, onMessageClosed } = this.props;\r\n    const notifCopy = Object.assign({}, notification, {\r\n      onClose: () => onMessageClosed(notification.id)\r\n    });\r\n    const { text } = notifCopy;\r\n    switch (notifCopy.type) {\r\n      case 'ERROR': {\r\n        alert.error(<span>{text}</span>, notifCopy);\r\n        break;\r\n      }\r\n      case 'SUCCESS': {\r\n        alert.success(text, notifCopy);\r\n        break;\r\n      }\r\n      case 'INFO': {\r\n        alert.info(text, notifCopy);\r\n        break;\r\n      }\r\n      default: {\r\n        console.error(`Unknown AlertMessage type: ${notifCopy.type}`);\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <span />\r\n    );\r\n  }\r\n}\r\n\r\n\r\nfunction mapStateToProps(state: JoalState) {\r\n  const { notifs, shouldShowDirtyConfNotif } = state.alerts;\r\n  return {\r\n    notifs,\r\n    shouldShowDirtyConfNotif\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: Dispatch) {\r\n  return ({\r\n    onMessageClosed: (id: string) => dispatch(removeNotification(id))\r\n  });\r\n}\r\n\r\nexport default withAlert()(connect(mapStateToProps, mapDispatchToProps)(JoalAlertDisplayer));\r\n","import JoalAlertProvider from './alerts-provider.component';\r\n\r\nexport default JoalAlertProvider;\r\n","import React from 'react';\r\nimport { Provider as AlertProvider, positions, transitions } from 'react-alert';\r\nimport withWidth, { isWidthUp, WithWidth } from '@material-ui/core/withWidth';\r\nimport AlertTemplate from './alert-template';\r\nimport AlertsDisplayer from './alerts-displayer.component';\r\n\r\ninterface JoalAlertProviderProps extends WithWidth {\r\n}\r\n\r\nconst JoalAlertProvider: React.FC<JoalAlertProviderProps> = ({ width }) => (\r\n  <AlertProvider\r\n    template={AlertTemplate}\r\n    offset={isWidthUp('sm', width) ? '10px' : '6px'}\r\n    position={positions.TOP_RIGHT}\r\n    timeout={0}\r\n    transition={transitions.FADE}\r\n    containerStyle={{ zIndex: 14000000 }}\r\n  >\r\n    <AlertsDisplayer />\r\n  </AlertProvider>\r\n);\r\n\r\nexport default withWidth()(JoalAlertProvider);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Route, Router, Switch } from 'react-router-dom';\r\nimport { ConnectedRouter } from 'connected-react-router'\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport DashboardPage from './pages/dashboard';\r\nimport SettingsPage from './pages/settings';\r\nimport Historypage from './pages/event-history';\r\nimport NavigationBar from './components/NavigationBar';\r\nimport TorrentDropZone from './components/TorrentDropZone';\r\nimport JoalAppBar from './components/AppBar';\r\nimport Alerts from './modules/alerts';\r\nimport { uploadTorrents } from './modules/joal-api';\r\n\r\nimport { History } from 'history';\r\n\r\n\r\nconst useStyles = makeStyles((theme: Theme) => \r\n  createStyles({\r\n    root: {\r\n      flexGrow: 1,\r\n      padding: theme.spacing(2)\r\n    },\r\n    navigationBarWrapper: {\r\n      position: 'fixed',\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0\r\n    }\r\n  })\r\n);\r\n\r\n\r\ninterface AppProps {\r\n  history: History,\r\n  onFileDrop: (accepted: Array<File>) => void,\r\n};\r\n\r\n\r\nconst App: React.FC<AppProps> = ({ onFileDrop, history }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div>\r\n      <Alerts />\r\n      <TorrentDropZone onDrop={onFileDrop}>\r\n        <header>\r\n          <JoalAppBar />\r\n        </header>\r\n        <Grid container className={classes.root}>\r\n          <Grid item xs={12}>\r\n            <main>\r\n              <ConnectedRouter history={history}>\r\n                <Router history={history}>\r\n                  <Switch>\r\n                    <Route exact path=\"/history\" component={Historypage} />\r\n                    <Route exact path=\"/settings\" component={SettingsPage} />\r\n                    <Route exact path=\"/\" component={DashboardPage} />\r\n                  </Switch>\r\n                </Router>\r\n              </ConnectedRouter>\r\n            </main>\r\n            <footer className={classes.navigationBarWrapper}>\r\n              <NavigationBar />\r\n            </footer>\r\n          </Grid>\r\n        </Grid>\r\n      </TorrentDropZone>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nconst mapStateToProps = () => ({\r\n  onFileDrop: (accepted: Array<File>) => {\r\n    uploadTorrents(accepted);\r\n  }\r\n});\r\n\r\nexport default connect(mapStateToProps)(App);\r\n","import React from 'react';\r\nimport { Provider } from 'react-redux';\r\nimport { ThemeProvider } from './modules/theme';\r\nimport App from './App';\r\n\r\nimport { History } from 'history';\r\nimport { Store } from 'redux';\r\n\r\ninterface RootProps {\r\n  store: Store,\r\n  history: History\r\n};\r\n\r\nconst Root: React.FC<RootProps> = ({ store, history }) => (\r\n  <Provider store={store}>\r\n    <ThemeProvider>\r\n      <App history={history} />\r\n    </ThemeProvider>\r\n  </Provider>\r\n);\r\n\r\nexport default Root;\r\n","import { createReducer } from 'redux-starter-kit';\r\nimport {\r\n  TORRENT_SEARCH_FILTER_TEXT_CHANGED,\r\n  TORRENT_SORT_CHANGED\r\n} from './torrentsTable.actions';\r\n\r\nconst initialState = {\r\n  searchFilter: '',\r\n  sortProperty: '',\r\n  sortDirection: '',\r\n  currentPage: 1,\r\n  torrentsPerPage: 10\r\n};\r\n\r\n\r\nexport default createReducer(initialState, {\r\n  [TORRENT_SEARCH_FILTER_TEXT_CHANGED]: (state, action) => {\r\n    state.searchFilter = action.text\r\n  },\r\n  [TORRENT_SORT_CHANGED]: (state, action) => {\r\n    state.sortProperty = action.sortProperty;\r\n    state.sortDirection = action.sortDirection;\r\n  }\r\n});\r\n","import { createReducer } from 'redux-starter-kit';\r\nimport {\r\n  LOCAL_CONFIG_HAS_CHANGED,\r\n  DISCARD_LOCAL_CONFIG\r\n} from './settings.actions';\r\nimport {\r\n  CONFIG_IS_IN_DIRTY_STATE as API___CONFIG_IS_IN_DIRTY_STATE,\r\n  CONFIG_HAS_BEEN_LOADED as API____CONFIG_HAS_BEEN_LOADED\r\n} from '../../modules/joal-api/settings/settings.actions';\r\n\r\nimport { LocalConfig } from '../../reducers/types';\r\n\r\nconst initialState: LocalConfig = {\r\n  localConfig: undefined\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [LOCAL_CONFIG_HAS_CHANGED]: (state, action) => {\r\n    state.localConfig = action.config;\r\n  },\r\n  [DISCARD_LOCAL_CONFIG]: (state) => {\r\n    state.localConfig = undefined;\r\n  },\r\n  // When the server send the new config we remove the local one\r\n  [API___CONFIG_IS_IN_DIRTY_STATE]: () => {\r\n    return initialState;\r\n  },\r\n  [API____CONFIG_HAS_BEEN_LOADED]: () => {\r\n    return initialState;\r\n  }\r\n});\r\n","import { createReducer } from 'redux-starter-kit';\r\nimport {\r\n  CHANGE_THEME_TYPE\r\n} from './theme-modifier.actions';\r\n\r\n\r\nconst initialState = {\r\n  palette: {\r\n    type: localStorage.getItem('themeType') || 'light'\r\n  }\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [CHANGE_THEME_TYPE]: (state) => {\r\n    const newTheme = state.palette.type === 'light' ? 'dark' : 'light';\r\n    localStorage.setItem('themeType', newTheme);\r\n\r\n    state.palette.type = newTheme\r\n  }\r\n});\r\n","import { createReducer } from 'redux-starter-kit';\r\nimport {\r\n  TORRENT_FILE_ADDED,\r\n  TORRENT_FILE_DELETED,\r\n  FAILED_TO_ADD_TORRENT_FILE,\r\n  RESET_TORRENT_FILES_STATE\r\n} from './torrentFile.actions';\r\n\r\nimport { TorrentFile } from '../types';\r\n\r\nconst initialState: Array<TorrentFile> = [];\r\n\r\nexport default createReducer(initialState, {\r\n  [TORRENT_FILE_ADDED]: (state, action) => {\r\n    const newState = state.filter(tf => tf.infoHash !== action.payload.infoHash);\r\n    newState.push(action.payload);\r\n    return newState;\r\n  },\r\n  [TORRENT_FILE_DELETED]: (state, action) => {\r\n    return state.filter(tf => tf.infoHash !== action.payload.infoHash);\r\n  },\r\n  [FAILED_TO_ADD_TORRENT_FILE]: (state) => {\r\n    // Do nothing, notifications reducer will handle it\r\n    return state;\r\n  },\r\n  [RESET_TORRENT_FILES_STATE]: () => {\r\n    return initialState;\r\n  }\r\n});\r\n","import {\r\n  GLOBAL_SEED_STARTED,\r\n  GLOBAL_SEED_STOPPED,\r\n  SEND_START_TO_SERVER,\r\n  SEND_STOP_TO_SERVER,\r\n  RESET_CLIENT_STATE\r\n} from './client.actions';\r\nimport { createReducer } from 'redux-starter-kit';\r\n\r\nimport { Client } from '../types';\r\n\r\nconst initialState: Client = {\r\n  isFetching: true,\r\n  isStarted: false,\r\n  name: ''\r\n};\r\n\r\nexport default createReducer(initialState, {\r\n  [GLOBAL_SEED_STARTED]: (state, action) => {\r\n    state.isFetching = false;\r\n    state.isStarted = true;\r\n    state.name = action.payload.client;\r\n  },\r\n  [GLOBAL_SEED_STOPPED]: (state) => {\r\n    state.isFetching = false;\r\n    state.isStarted = false;\r\n    state.name = '';\r\n  },\r\n  [SEND_START_TO_SERVER]: (state) => {\r\n    state.isFetching = true;\r\n  },\r\n  [SEND_STOP_TO_SERVER]: (state) => {\r\n    state.isFetching = true;\r\n  },\r\n  [RESET_CLIENT_STATE]: () => {\r\n    return initialState;\r\n  }\r\n});\r\n","import { createReducer } from 'redux-starter-kit';\r\nimport {\r\n  CONFIG_IS_IN_DIRTY_STATE,\r\n  INVALID_CONFIG,\r\n  CONFIG_HAS_BEEN_LOADED,\r\n  LIST_OF_CLIENT_FILES,\r\n  RESET_CONFIG\r\n} from './settings.actions';\r\n\r\nimport { Settings } from '../types';\r\n\r\nconst initialState: Settings = {\r\n  isDirty: false,\r\n  errMessage: undefined,\r\n  config: {\r\n    minUploadRate: 0,\r\n    maxUploadRate: 0,\r\n    simultaneousSeed: 0,\r\n    uploadRatioTarget: -1.0,\r\n    client: '',\r\n    keepTorrentWithZeroLeechers: false\r\n  },\r\n  availableClients: []\r\n};\r\n\r\n\r\nexport default createReducer(initialState, {\r\n  [CONFIG_IS_IN_DIRTY_STATE]: (state, action) => {\r\n    state.isDirty = true;\r\n    state.config = action.payload.config;\r\n    state.errMessage = undefined;\r\n  },\r\n  [INVALID_CONFIG]: (state, action) => {\r\n    state.errMessage = action.payload.error;\r\n  },\r\n  [CONFIG_HAS_BEEN_LOADED]: (state, action) => {\r\n    state.isDirty = false;\r\n    state.config = action.payload.config;\r\n    state.errMessage = undefined;\r\n  },\r\n  [LIST_OF_CLIENT_FILES]: (state, action) => {\r\n    state.availableClients = action.payload.clients;\r\n  },\r\n  [RESET_CONFIG]: () => {\r\n    return initialState;\r\n  }\r\n});\r\n","import { createReducer } from 'redux-starter-kit';\r\nimport {\r\n  SEEDING_SPEED_HAS_CHANGED,\r\n  RESET_SPEED_STATE\r\n} from './speed.actions';\r\n\r\nimport { SpeedsArray, Speed } from '../types';\r\n\r\nconst initialState: SpeedsArray = {};\r\n\r\n\r\nexport default createReducer(initialState, {\r\n  [SEEDING_SPEED_HAS_CHANGED]: (state, action: { payload: { speeds: Array<Speed> }}) => {\r\n    const speeds: SpeedsArray = {};\r\n    for (let currentSpeed of action.payload.speeds) {\r\n      speeds[currentSpeed.infoHash] = currentSpeed;\r\n    }\r\n    return speeds;\r\n  },\r\n  [RESET_SPEED_STATE]: () => {\r\n    return initialState;\r\n  }\r\n});\r\n","import { createReducer } from 'redux-starter-kit';\r\nimport {\r\n  FAILED_TO_ANNOUNCE,\r\n  SUCCESSFULLY_ANNOUNCE,\r\n  TOO_MANY_ANNOUNCES_FAILED,\r\n  WILL_ANNOUNCE,\r\n  RESET_ANNOUNCER_STATE\r\n} from './announcers.actions';\r\n\r\nimport { Announcer as AnnouncerType } from '../types';\r\n\r\nconst initialState: Array<AnnouncerType> = [];\r\n\r\n\r\nexport default createReducer(initialState, {\r\n  [FAILED_TO_ANNOUNCE]: (state, action) => {\r\n    if (!state.find(announcer => announcer.infoHash === action.payload.infoHash)) {\r\n      state.push(Object.assign({}, { isFetching: false }, action.payload));\r\n      return;\r\n    }\r\n    return state.map(announcer => {\r\n      if (announcer.infoHash === action.payload.infoHash) {\r\n        return Object.assign(\r\n          {},\r\n          announcer,\r\n          { isFetching: false },\r\n          action.payload\r\n        );\r\n      }\r\n      return announcer;\r\n    });\r\n  },\r\n  [SUCCESSFULLY_ANNOUNCE]: (state, action) => {\r\n    if (action.payload.requestEvent === 'STOPPED') {\r\n      return state.filter(announcer => announcer.infoHash !== action.payload.infoHash);\r\n    }\r\n\r\n    if (!state.find(announcer => announcer.infoHash === action.payload.infoHash)) {\r\n      state.push(Object.assign({}, { isFetching: false }, action.payload));\r\n      return;\r\n    }\r\n\r\n    return state.map(announcer => {\r\n      if (announcer.infoHash === action.payload.infoHash) {\r\n        return Object.assign(\r\n          {},\r\n          announcer,\r\n          { isFetching: false },\r\n          action.payload\r\n        );\r\n      }\r\n      return announcer;\r\n    });\r\n  },\r\n  [TOO_MANY_ANNOUNCES_FAILED]: (state, action) => {\r\n    return state.filter(announcer => announcer.infoHash !== action.payload.infoHash);\r\n  },\r\n  [WILL_ANNOUNCE]: (state, action) => {\r\n    if (!state.find(announcer => announcer.infoHash === action.payload.infoHash)) {\r\n      state.push(Object.assign({}, { isFetching: true }, action.payload));\r\n      return;\r\n    }\r\n\r\n    return state.map(announcer => {\r\n      if (announcer.infoHash === action.payload.infoHash) {\r\n        return Object.assign(\r\n          {},\r\n          announcer,\r\n          { isFetching: true },\r\n          action.payload\r\n        );\r\n      }\r\n      return announcer;\r\n    });\r\n  },\r\n  [RESET_ANNOUNCER_STATE]: () => {\r\n    return initialState;\r\n  }\r\n});\r\n","import { createReducer } from 'redux-starter-kit';\r\nimport {\r\n  IS_CONNECTING,\r\n  HAS_CONNECTED,\r\n  HAS_FAILED_TO_CONNECT,\r\n  HAS_DROP_CONNECTION,\r\n  INIT_OVER,\r\n  RESET_STOMP_STATE\r\n} from './stomp.actions';\r\n\r\nimport { Stomp } from '../types';\r\n\r\nconst initialState: Stomp = {\r\n  isConnected: false,\r\n  isFullyInit: false\r\n};\r\n\r\n\r\nexport default createReducer(initialState, {\r\n  [IS_CONNECTING]: (state) => {\r\n    state.isFullyInit = false;\r\n  },\r\n  [HAS_CONNECTED]: (state) => {\r\n    state.isConnected = true;\r\n  },\r\n  [HAS_FAILED_TO_CONNECT]: (state) => {\r\n    state.isConnected = false;\r\n    state.isFullyInit = false;\r\n  },\r\n  [HAS_DROP_CONNECTION]: (state) => {\r\n    state.isConnected = false;\r\n    state.isFullyInit = false;\r\n  },\r\n  [INIT_OVER]: (state) => {\r\n    state.isFullyInit = true;\r\n  },\r\n  [RESET_STOMP_STATE]: () => {\r\n    return initialState;\r\n  }\r\n});\r\n","import { combineReducers } from 'redux';\r\nimport apiTorrentFileReducer from './torrentFiles/torrentFiles.reducer';\r\nimport apiClientReducer from './client/client.reducer';\r\nimport apiSettingsReducer from './settings/settings.reducer';\r\nimport apiSpeedReducer from './speed/speed.reducer';\r\nimport apiAnnouncersReducer from './announcers/announcers.reducer';\r\nimport apiStompReducer from './stomp/stomp.reducer';\r\n\r\nexport default combineReducers({\r\n  torrentFiles: apiTorrentFileReducer,\r\n  client: apiClientReducer,\r\n  announcers: apiAnnouncersReducer,\r\n  settings: apiSettingsReducer,\r\n  speed: apiSpeedReducer,\r\n  stomp: apiStompReducer\r\n});\r\n","import { createReducer } from 'redux-starter-kit';\r\nimport { CONFIG_IS_IN_DIRTY_STATE, CONFIG_HAS_BEEN_LOADED, INVALID_CONFIG } from '../joal-api/settings/settings.actions';\r\nimport { TORRENT_FILE_ADDED, FAILED_TO_ADD_TORRENT_FILE } from '../joal-api/torrentFiles/torrentFile.actions';\r\nimport {\r\n  INIT_OVER,\r\n  HAS_CONNECTED,\r\n  HAS_DROP_CONNECTION,\r\n  HAS_FAILED_TO_CONNECT,\r\n  RECEIVED_ERROR_MESSAGE\r\n} from '../joal-api/stomp/stomp.actions';\r\nimport { REMOVE_NOTIFICATION } from './alerts.actions';\r\n\r\nimport { NotificationState, Notification } from './types';\r\n\r\n\r\nconst uuidv4 = () => (\r\n  ([1e7] as any +-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, (c: number) => (// eslint-disable-line space-infix-ops\r\n    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16) // eslint-disable-line implicit-arrow-linebreak, no-bitwise, no-mixed-operators\r\n  ))\r\n);\r\n\r\nconst initialState: NotificationState = {\r\n  shouldShowDirtyConfNotif: false,\r\n  notifs: []\r\n};\r\nlet isAppInit = false;\r\n\r\nexport default createReducer(initialState, {\r\n  [INIT_OVER]: (state) => {\r\n    isAppInit = true;\r\n    return state;\r\n  },\r\n  [HAS_CONNECTED]: (state) => {\r\n    isAppInit = false;\r\n    const notif: Notification = {\r\n      id: uuidv4(),\r\n      text: 'Connected to JOAL',\r\n      timeout: 6000,\r\n      type: 'SUCCESS'\r\n    };\r\n\r\n    state.notifs.push(notif);\r\n  },\r\n  [HAS_DROP_CONNECTION]: (state) => {\r\n    const notif: Notification = {\r\n      id: uuidv4(),\r\n      text: 'Lost connection to JOAL, auto-reconnect in 8 seconds.',\r\n      timeout: 6000,\r\n      type: 'ERROR'\r\n    };\r\n\r\n    state.notifs.push(notif);\r\n  },\r\n  [HAS_FAILED_TO_CONNECT]: (state) => {\r\n    const notif: Notification = {\r\n      id: uuidv4(),\r\n      text: 'Failed to connect to JOAL, retry in 8 seconds.',\r\n      timeout: 6000,\r\n      type: 'ERROR'\r\n    };\r\n\r\n    state.notifs.push(notif);\r\n  },\r\n  [REMOVE_NOTIFICATION]: (state, action) => {\r\n    state.notifs = state.notifs.filter(notif => notif.id !== action.payload);\r\n  },\r\n  [CONFIG_IS_IN_DIRTY_STATE]: (state) => {\r\n    state.shouldShowDirtyConfNotif = true;\r\n  },\r\n  [CONFIG_HAS_BEEN_LOADED]: (state) => {\r\n    state.shouldShowDirtyConfNotif = false;\r\n  },\r\n  [INVALID_CONFIG]: (state, action) => {\r\n    const notif: Notification = {\r\n      id: uuidv4(),\r\n      text: `Invalid config: ${action.payload.error}`,\r\n      timeout: 6000,\r\n      type: 'ERROR'\r\n    };\r\n\r\n    state.notifs.push(notif);\r\n  },\r\n  [TORRENT_FILE_ADDED]: (state, action) => {\r\n    if (!isAppInit) {\r\n      // don't show notification if app is not inited\r\n      return state;\r\n    }\r\n    const notif: Notification = {\r\n      id: uuidv4(),\r\n      text: `${action.payload.name} added`,\r\n      timeout: 6000,\r\n      type: 'SUCCESS'\r\n    };\r\n\r\n    state.notifs.push(notif);\r\n  },\r\n  [FAILED_TO_ADD_TORRENT_FILE]: (state, action) => {\r\n    const notif: Notification = {\r\n      id: uuidv4(),\r\n      text: `${action.payload.fileName} was rejected by server: ${action.payload.error}`,\r\n      timeout: 6000,\r\n      type: 'ERROR'\r\n    };\r\n\r\n    state.notifs.push(notif);\r\n  },\r\n  [RECEIVED_ERROR_MESSAGE]: (state, action) =>{\r\n    const notif: Notification = {\r\n      id: uuidv4(),\r\n      text: action.message,\r\n      timeout: 8000,\r\n      type: 'ERROR'\r\n    };\r\n\r\n    state.notifs.push(notif);\r\n  }\r\n});\r\n","import { combineReducers } from 'redux';\r\nimport { connectRouter } from 'connected-react-router'\r\nimport torrentsTableReducer from '../components/TorrentsTable/torrentsTable.reducer';\r\nimport uiConfigReducer from '../pages/settings/settings.reducer';\r\nimport themeReducer from '../modules/theme/theme-modifier/theme-modifier.reducer';\r\nimport apiReducer from '../modules/joal-api/joal-api.reducer';\r\nimport alertReducer from '../modules/alerts/alerts.reducer';\r\n\r\nimport { History } from 'history';\r\n\r\nexport default (history: History) => combineReducers({\r\n  api: apiReducer,\r\n  app: combineReducers({\r\n    config: uiConfigReducer,\r\n    torrentsTable: torrentsTableReducer\r\n  }),\r\n  theme: themeReducer,\r\n  alerts: alertReducer,\r\n  router: connectRouter(history)\r\n});\r\n","import { configureStore, getDefaultMiddleware } from 'redux-starter-kit';\r\nimport { createHashHistory } from 'history';\r\nimport { routerMiddleware, routerActions } from 'connected-react-router';\r\nimport { createLogger } from 'redux-logger';\r\nimport createRootReducer from '../reducers';\r\n\r\nimport { EnhancerOptions } from 'redux-devtools-extension';\r\n\r\nexport const history = createHashHistory();\r\n\r\n\r\nexport default function configureAppStore (initialState?: any) {\r\n  const rootReducer = createRootReducer(history);\r\n\r\n  const middlewares = [\r\n    routerMiddleware(history),\r\n    ...getDefaultMiddleware()\r\n  ]\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    middlewares.unshift(createLogger({ level: 'info', collapsed: true }));\r\n  }\r\n\r\n  let devtools: boolean | EnhancerOptions = false;\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    devtools = {\r\n      actionCreators: {\r\n        ...routerActions\r\n      },\r\n      trace: true\r\n    };\r\n  }\r\n\r\n  const store = configureStore({\r\n    reducer: rootReducer,\r\n    middleware: middlewares,\r\n    devTools: devtools,\r\n    preloadedState: initialState\r\n  })\r\n\r\n  if (process.env.NODE_ENV !== 'production' && (module as any).hot) {\r\n    (module as any).hot.accept('../reducers', () => store.replaceReducer(rootReducer))\r\n  }\r\n\r\n  return store;\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport configureAppStore, { history } from './store/configureAppStore';\r\nimport { saveGUIConfig } from './utils/ConfigProvider';\r\nimport { connectStomp } from './modules/joal-api';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport './index.css';\r\nimport 'typeface-roboto';\r\n\r\nconst attemptToGetUiConfigFromQuerySearchParam = () => {\r\n  if (!window.location.search || !window.location.search.includes('ui_credentials')) {\r\n    return;\r\n  }\r\n  const uRLSearchParams = new URLSearchParams(window.location.search); // eslint-disable-line compat/compat\r\n  const credentialsUriEncoded = uRLSearchParams.get('ui_credentials');\r\n  if (credentialsUriEncoded === null) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const config = JSON.parse(decodeURIComponent(credentialsUriEncoded));\r\n    saveGUIConfig(config);\r\n  } catch (e) {\r\n    console.error('Failed to extract uiConfig from url params.', e);\r\n  } finally {\r\n    // Remove url param from uri to make it cleaner in history tab\r\n    uRLSearchParams.delete('ui_credentials');\r\n    let cleanUri = window.location.pathname;\r\n    if (uRLSearchParams.keys().next().done === false) { // if the url search param still contains uri parameters\r\n      cleanUri += `?${uRLSearchParams.toString()}`;\r\n    }\r\n    if (window.location.hash) {\r\n      cleanUri += window.location.hash;\r\n    }\r\n    window.history.replaceState({}, document.title, cleanUri);\r\n  }\r\n};\r\n\r\nconst store = configureAppStore();\r\n\r\nattemptToGetUiConfigFromQuerySearchParam();\r\n\r\nconnectStomp(store);\r\n\r\nconst rootEl = document.getElementById('root');\r\n\r\n\r\nlet render = () => {\r\n  // Dynamically import our main App component, and render it\r\n  const Root = require('./Root').default; // eslint-disable-line global-require\r\n  ReactDOM.render(<Root store={store} history={history} />, rootEl);\r\n};\r\n\r\nif ((module as any).hot) {\r\n  // Support hot reloading of components\r\n  // and display an overlay for runtime errors\r\n  const renderApp = render;\r\n\r\n  // In development, we wrap the rendering function to catch errors,\r\n  // and if something breaks, log the error\r\n  render = () => {\r\n    renderApp();\r\n  };\r\n\r\n  // Whenever the App component file or one of its dependencies\r\n  // is changed, re-import the updated component and re-render it\r\n  (module as any).hot.accept('./Root', () => {\r\n    setTimeout(render);\r\n  });\r\n}\r\n\r\nrender();\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import { Config } from '../types';\r\n\r\nexport const CONFIG_IS_IN_DIRTY_STATE = '@@api/listener/CONFIG_IS_IN_DIRTY_STATE';\r\nexport const INVALID_CONFIG = '@@api/listener/INVALID_CONFIG';\r\nexport const CONFIG_HAS_BEEN_LOADED = '@@api/listener/CONFIG_HAS_BEEN_LOADED';\r\nexport const LIST_OF_CLIENT_FILES = '@@api/listener/LIST_OF_CLIENT_FILES';\r\n\r\nexport const SEND_CONFIG = '@@api/send/SEND_CONFIG';\r\n\r\nexport const RESET_CONFIG = '@@reset/RESET_CONFIG';\r\n\r\nexport const sendConfig = (config: Config) => ({\r\n  type: SEND_CONFIG,\r\n  config\r\n});\r\n\r\n\r\nexport const resetConfig = () => (\r\n  { type: RESET_CONFIG }\r\n);\r\n","import JoalStompClient from './JoalStompClient';\r\nimport { resetAnnouncerState } from './announcers/announcers.actions';\r\nimport { sendStartToServer, sendStopToServer, resetClientState } from './client/client.actions';\r\nimport { sendConfig, resetConfig } from './settings/settings.actions';\r\nimport { resetStompState } from './stomp/stomp.actions';\r\nimport { resetTorrentFilesState } from './torrentFiles/torrentFile.actions';\r\nimport { resetSpeedState } from './speed/speed.actions';\r\n\r\nimport { Store } from 'redux';\r\nimport { Config } from './types';\r\n\r\nlet store: Store;\r\nlet stompClient: any;\r\n\r\nexport const connectStomp = (appStore: Store) => {\r\n  store = appStore;\r\n  stompClient = new JoalStompClient(store, () => {\r\n    // On disconnect\r\n\r\n    store.dispatch(resetStompState());\r\n    store.dispatch(resetConfig());\r\n    store.dispatch(resetClientState());\r\n    store.dispatch(resetAnnouncerState());\r\n    store.dispatch(resetTorrentFilesState());\r\n    store.dispatch(resetSpeedState());\r\n  });\r\n  stompClient.connect();\r\n};\r\n\r\nexport const disconnectAndReconnect = () => {\r\n  stompClient.disconnectAndReconnect();\r\n};\r\n\r\n\r\nexport const sendStartSession = () => {\r\n  store.dispatch(sendStartToServer());\r\n  stompClient.send('/joal/global/start');\r\n};\r\n\r\nexport const sendStopSession = () => {\r\n  store.dispatch(sendStopToServer());\r\n  stompClient.send('/joal/global/stop');\r\n};\r\n\r\nexport const sendConfigToServer = (config: Config) => {\r\n  store.dispatch(sendConfig(config));\r\n  stompClient.send('/joal/config/save', JSON.stringify(config));\r\n};\r\n\r\nexport const uploadTorrents = (files: Array<File>) => {\r\n  const reader = new FileReader();\r\n\r\n  // Process files one by one (queue like) to reduce memory consuption when sender a lot of torrent files.\r\n  const processOne = () => {\r\n    const singleFile = files.pop();\r\n    if (singleFile === undefined) {\r\n      return;\r\n    }\r\n\r\n    ((file) => {\r\n      reader.onload = () => {\r\n        if (reader.result == null) {\r\n          return\r\n        }\r\n        const b64Encoded = (reader.result as string).replace(/data:.+?,/, '');\r\n        stompClient.send('/joal/torrents/upload', JSON.stringify({\r\n          fileName: file.name,\r\n          b64String: b64Encoded\r\n        }));\r\n        setTimeout(processOne, 1300);\r\n      };\r\n      reader.onabort = () => console.log(`file reading was aborted for [${file.name}]`);\r\n      reader.onerror = () => console.log(`file reading has failed for [${file.name}]`);\r\n\r\n      reader.readAsDataURL(file);\r\n    })(singleFile);\r\n  };\r\n\r\n  processOne();\r\n};\r\n\r\nexport const deleteTorrent = (torrentInfoHash: string) => {\r\n  stompClient.send('/joal/torrents/delete', torrentInfoHash);\r\n};\r\n","import { Store } from 'redux';\r\nimport Webstomp, { Client as WebStompClient, Subscription, Frame } from 'webstomp-client';\r\nimport { getGUIConfig } from '../../utils/ConfigProvider';\r\nimport {\r\n  isConnecting,\r\n  hasConnected,\r\n  hasDropConnection,\r\n  hasFailedToConnect,\r\n  initOver,\r\n  hasReceivedError\r\n} from './stomp/stomp.actions';\r\n\r\nconst uuidv4 = () => (\r\n  ([1e7] as any +-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, (c: number) => (// eslint-disable-line space-infix-ops\r\n    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16) // eslint-disable-line implicit-arrow-linebreak, no-bitwise, no-mixed-operators\r\n  ))\r\n);\r\n\r\nexport type StompMessage = {\r\n  type: string,\r\n  payload: {}\r\n};\r\n\r\nexport default class JoalStompClient {\r\n  reconnectTimeout?: number\r\n  reduxStore: Store\r\n  onDisconnectCallback: () => void\r\n  subscriptions: Array<Subscription>\r\n  stompClient: WebStompClient\r\n\r\n\r\n  constructor(reduxStore: Store, onDisconnectCallback: () => void) {\r\n    this.reconnectTimeout = undefined;\r\n    this.reduxStore = reduxStore;\r\n    this.onDisconnectCallback = onDisconnectCallback;\r\n    this.subscriptions = [];\r\n    this.stompClient = {} as WebStompClient;\r\n  }\r\n\r\n  send(path: string, body: string = '', headers: {} = {}) {\r\n    if (!this.stompClient || !this.stompClient.connected) {\r\n      console.error('You can not send message to JOAL when not connected through WebSocket.');\r\n      return;\r\n    }\r\n    this.stompClient.send(\r\n      path,\r\n      body,\r\n      headers\r\n    );\r\n  }\r\n\r\n  connect() {\r\n    const guiConf = getGUIConfig();\r\n    const urlScheme = (window.location.protocol === 'https:' ? 'wss' : 'ws');\r\n    const url = `${urlScheme}://${guiConf.host}:${guiConf.port}/${guiConf.pathPrefix}`;\r\n    const { secretToken } = guiConf;\r\n    this._dispatchOnConnect(); // eslint-disable-line no-underscore-dangle\r\n    this.stompClient = Webstomp.client(url, { debug: false, protocols: ['v12.stomp', 'v11.stomp'] });\r\n\r\n    this.stompClient.connect({ 'X-Joal-Auth-Token': secretToken, 'X-Joal-Username': uuidv4() }, (/* response */) => {\r\n      this._dispatchHasConnected(); // eslint-disable-line no-underscore-dangle\r\n      /* specific mapping that intentionally include the /joal prefix */\r\n      this.stompClient.subscribe('/joal/initialize-me', (message) => {\r\n        JSON.parse(message.body).forEach((msg: StompMessage) => {\r\n          this.onReceiveMessage(msg);\r\n        });\r\n        // We consider that the app is inited when the replayable events has been played.\r\n        this._dispatchIsReady(); // eslint-disable-line no-underscore-dangle\r\n        message.ack();\r\n        this.stompClient.unsubscribe('/initialize-me');\r\n      });\r\n\r\n      ['/global', '/announce', '/config', '/torrents', '/speed'].forEach(subscribesPath => {\r\n        const subscribtion = this.stompClient.subscribe(subscribesPath, (message) => {\r\n          message.ack();\r\n          this.onReceiveMessage(JSON.parse(message.body));\r\n        }, { ack: 'client' });\r\n        this.subscriptions.push(subscribtion);\r\n      });\r\n    }, (error: CloseEvent | Frame) => {\r\n      console.log('error message from websocket', error);\r\n\r\n      if (error instanceof CloseEvent) {\r\n        // if we had some subscriptions this is a connection drop.\r\n        const isConnectionDropped = this.subscriptions.length > 0;\r\n\r\n        if (isConnectionDropped) {\r\n          this._dispatchHasDropConnection(); // eslint-disable-line no-underscore-dangle\r\n        } else {\r\n          this._dispatchHasFailedToConnect(); // eslint-disable-line no-underscore-dangle\r\n        }\r\n        if (this.onDisconnectCallback) this.onDisconnectCallback();\r\n        this._reconnectAfterTimeout(8000); // eslint-disable-line no-underscore-dangle\r\n      } else {\r\n        this.reduxStore.dispatch(hasReceivedError(error.headers['message'] || 'Undefined error'));\r\n      }\r\n    });\r\n  }\r\n\r\n  _dispatchIsReady() {\r\n    this.reduxStore.dispatch(initOver());\r\n  }\r\n\r\n  _dispatchOnConnect() {\r\n    this.reduxStore.dispatch(isConnecting());\r\n  }\r\n\r\n  _dispatchHasConnected() {\r\n    this.reduxStore.dispatch(hasConnected());\r\n  }\r\n\r\n  _dispatchHasDropConnection() {\r\n    this.reduxStore.dispatch(hasDropConnection());\r\n  }\r\n\r\n  _dispatchHasFailedToConnect() {\r\n    this.reduxStore.dispatch(hasFailedToConnect());\r\n  }\r\n\r\n  onReceiveMessage(message: StompMessage) {\r\n    const { type, payload } = message;\r\n    this.reduxStore.dispatch({ type: `@@api/listener/${type}`, payload });\r\n  }\r\n\r\n  _reconnectAfterTimeout(timeout: number) {\r\n    this.subscriptions.forEach(sub => sub.unsubscribe()); // release resources\r\n    this.subscriptions = [];\r\n    // the reconnectTimeout = undefined will ensure we don't cause memory leak.\r\n    if (this.reconnectTimeout === undefined) {\r\n      this.reconnectTimeout = window.setTimeout(() => {\r\n        this.connect();\r\n        this.reconnectTimeout = undefined;\r\n      }, timeout);\r\n    }\r\n  }\r\n\r\n  disconnect() {\r\n    this.subscriptions.forEach(sub => sub.unsubscribe()); // release resources\r\n    this.subscriptions = [];\r\n    if (this.stompClient && this.stompClient.connected) {\r\n      this.stompClient.disconnect();\r\n    }\r\n    if (this.onDisconnectCallback) this.onDisconnectCallback();\r\n  }\r\n\r\n  disconnectAndReconnect() {\r\n    clearTimeout(this.reconnectTimeout);\r\n    this.reconnectTimeout = undefined;\r\n    this.disconnect();\r\n    this.connect();\r\n  }\r\n}\r\n","export const TORRENT_FILE_ADDED = '@@api/listener/TORRENT_FILE_ADDED';\r\nexport const TORRENT_FILE_DELETED = '@@api/listener/TORRENT_FILE_DELETED';\r\nexport const FAILED_TO_ADD_TORRENT_FILE = '@@api/listener/FAILED_TO_ADD_TORRENT_FILE';\r\n\r\nexport const RESET_TORRENT_FILES_STATE = '@@reset/RESET_TORRENT_FILES_STATE';\r\n\r\n\r\nexport const resetTorrentFilesState = () => (\r\n  { type: RESET_TORRENT_FILES_STATE }\r\n);\r\n","export const GLOBAL_SEED_STARTED = '@@api/listener/GLOBAL_SEED_STARTED';\r\nexport const GLOBAL_SEED_STOPPED = '@@api/listener/GLOBAL_SEED_STOPPED';\r\n\r\nexport const SEND_START_TO_SERVER = '@@api/send/SEND_START_TO_SERVER';\r\nexport const SEND_STOP_TO_SERVER = '@@api/send/SEND_STOP_TO_SERVER';\r\n\r\nexport const RESET_CLIENT_STATE = '@@reset/RESET_CLIENT_STATE';\r\n\r\n\r\nexport function sendStartToServer() {\r\n  return {\r\n    type: SEND_START_TO_SERVER\r\n  };\r\n}\r\n\r\nexport function sendStopToServer() {\r\n  return {\r\n    type: SEND_STOP_TO_SERVER,\r\n  };\r\n}\r\n\r\n\r\nexport const resetClientState = () => (\r\n  { type: RESET_CLIENT_STATE }\r\n);\r\n","export const FAILED_TO_ANNOUNCE = '@@api/listener/FAILED_TO_ANNOUNCE';\r\nexport const SUCCESSFULLY_ANNOUNCE = '@@api/listener/SUCCESSFULLY_ANNOUNCE';\r\nexport const TOO_MANY_ANNOUNCES_FAILED = '@@api/listener/TOO_MANY_ANNOUNCES_FAILED';\r\nexport const WILL_ANNOUNCE = '@@api/listener/WILL_ANNOUNCE';\r\n\r\nexport const RESET_ANNOUNCER_STATE = '@@reset/RESET_ANNOUNCER_STATE';\r\n\r\nexport const resetAnnouncerState = () => (\r\n  { type: RESET_ANNOUNCER_STATE }\r\n);\r\n","import isElectron from 'is-electron';\r\n\r\nimport { GuiConfig } from './types';\r\n\r\ninterface ConfigProvider {\r\n  getConfig: () => GuiConfig\r\n  saveConfig: (config: GuiConfig) => void\r\n}\r\n\r\nlet selectedConfProvider: ConfigProvider;\r\nif (isElectron()) {\r\n  selectedConfProvider = require('./ElectronConfigProvider'); // eslint-disable-line global-require\r\n} else {\r\n  selectedConfProvider = require('./WebBrowserConfigProvider'); // eslint-disable-line global-require\r\n}\r\n\r\n\r\nexport const getGUIConfig = () => selectedConfProvider.getConfig();\r\nexport const saveGUIConfig = (config: GuiConfig) => selectedConfProvider.saveConfig(config);\r\n\r\nexport type GuiConfig = GuiConfig;\r\n","\r\nexport const TORRENT_SEARCH_FILTER_TEXT_CHANGED = '@@ui/torrents-table/TORRENT_SEARCH_FILTER_TEXT_CHANGED';\r\nexport const TORRENT_SORT_CHANGED = '@@ui/torrents-table/TORRENT_SORT_CHANGED';\r\n\r\nexport function changeSearchFilterText(text: string) {\r\n  return {\r\n    type: TORRENT_SEARCH_FILTER_TEXT_CHANGED,\r\n    text\r\n  };\r\n}\r\n\r\nexport function changeTorrentSort(sortProperty: string, sortDirection: string) {\r\n  return {\r\n    type: TORRENT_SORT_CHANGED,\r\n    sortProperty,\r\n    sortDirection\r\n  };\r\n}\r\n","import { Config } from '../../modules/joal-api/types';\r\n\r\n\r\nexport const LOCAL_CONFIG_HAS_CHANGED = '@@ui/LOCAL_CONFIG_HAS_CHANGED';\r\nexport const DISCARD_LOCAL_CONFIG = '@@ui/DISCARD_LOCAL_CONFIG';\r\n\r\n\r\nexport const localConfigHasChanged = (config: Config) => {\r\n  return {\r\n    type: LOCAL_CONFIG_HAS_CHANGED,\r\n    config\r\n  };\r\n}\r\n\r\n\r\nexport const discardLocalConfigChanges = () => {\r\n  return {\r\n    type: DISCARD_LOCAL_CONFIG,\r\n  };\r\n}\r\n","export const SEEDING_SPEED_HAS_CHANGED = '@@api/listener/SEEDING_SPEED_HAS_CHANGED';\r\n\r\nexport const RESET_SPEED_STATE = '@@reset/RESET_SPEED_STATE';\r\n\r\nexport const resetSpeedState = () => (\r\n  { type: RESET_SPEED_STATE }\r\n);\r\n","export const CHANGE_THEME_TYPE = '@@ui/theme/CHANGE_THEME_TYPE';\r\n\r\nexport function changeThemeType() {\r\n  return {\r\n    type: CHANGE_THEME_TYPE\r\n  };\r\n}\r\n","export const REMOVE_NOTIFICATION = '@@notifications/REMOVE_NOTIFICATION';\r\n\r\nexport const removeNotification = (id: string) => ({\r\n  type: REMOVE_NOTIFICATION,\r\n  payload: id\r\n});\r\n"],"sourceRoot":""}